---
title: 53.Docker - windows安装docker-compose
date: 2023年4月4日10:06:36
---

## 安装docker-compose

```
https://github.com/docker/compose
```

下载相应版本 如: 

[docker-compose-windows-x86_64.exe](https://github.com/docker/compose/releases/download/v2.17.2/docker-compose-windows-x86_64.exe)

下载完成后 双击安装

验证成功

```
docker-compose -v

Docker Compose version v2.15.1
```



## 使用docker-compose

> 使用docker-compose前提情况，需要创建一个文件名为docker-compose.yml的文件。

1. 配置与启动tomcat
2. 创建docker-compose.yml

```
version: '3'

services:

  tomcat:

    restart: always

    image: tomcat

    container_name: tomcat

    ports:

      - 8080:8080

    volumes:

      - /d/DevelopData/DockerData/tomcat/webapps:/usr/local/tomcat/webapps

      - /d/DevelopData/DockerData/tomcat/logs:/usr/local/tomcat/logs

    environment:

      TZ: Asia/Shanghai

```

解释说明
version:’3’ :表示compose对docker版本的支持，这里是compose版本，并非是docker版本。

services: 表示一个该配置文件的所有容器实例，支持配置多个容器实例。

tomcat:表示是一个多个容器中的其中一个

restart: always：表示该容器实例是随着机器启动而启动。

image: tomcat：表示本容器使用的镜像是tomcat，如需要指定版本号则 image: tomcat:8.0。

container_name: tomcat:表示容器的一个别名。

ports：表示容器端口映射到宿主机端口。

volumes：表示dockers容器的数据卷，将容器实例的目录映射到宿主机上盘符目录。

environment：表示容器环境的设置，我这里配置的是tomcat容器的时区时间为亚洲/上海。




## 启动docker-compose

> 首先进入到你docker-compose.yml文件所存放的目录

1. docker-compose up -d





webapps目录我们是从容器映射到宿主机磁盘目录的，所以我会在这个目录下创建一个test工程并写一个index.html文件，以供我们进行测试。





通过浏览器访问：localhost:8080/test 即可访问到test/index.html文件





```
参考: 

https://blog.csdn.net/qq_38215042/article/details/108647680
```







## docker-compose 启动mysql

```
version: '3'

services:

  

  mysql:

   # restart: always

    image: mysql:latest

    container_name: mysql_latest

    ports:

      - 3306:3306

    environment:

      TZ: Asia/Shanghai

      MYSQL_ROOT_PASSWORD: Qianyan89892528

    command:

      --character-set-server=utf8mb4

      --collation-server=utf8mb4_general_ci

      --explicit_defaults_for_timestamp=true

      --lower_case_table_names=1

      --max_allowed_packet=128M

      --sql_mode='STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION'
      #--sql-mode="STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION,NO_ZERO_DATE,NO_ZERO_IN_DATE,ERROR_FOR_DIVISION_BY_ZERO"

    volumes:
      - ./db:/var/lib/mysql
      - ./conf/my.cnf:/etc/my.cnf
      # 数据库初始化脚本，当Mysql容器首次启动时，会在 /docker-entrypoint-initdb.d目录下扫描 .sh，.sql，.sql.gz类型的文件。如果这些类型的文件存在，将执行它们来初始化一个数据库；
      - ./init/:/docker-entrypoint-initdb.d/


 


 

```



