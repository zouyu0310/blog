(window.webpackJsonp=window.webpackJsonp||[]).push([[511],{1187:function(t,e,s){"use strict";s.r(e);var i=s(14),a=Object(i.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"配置参数说明"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置参数说明"}},[t._v("#")]),t._v(" 配置参数说明")]),t._v(" "),e("h3",{attrs:{id:"redis-sentinel架构-前提说明"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#redis-sentinel架构-前提说明"}},[t._v("#")]),t._v(" Redis Sentinel架构，前提说明")]),t._v(" "),e("ul",[e("li",[t._v("3个哨兵：自动监控和维护集群，不存放数据，只是吹哨人")]),t._v(" "),e("li",[t._v("1主2从：用于数据读取和存放")])]),t._v(" "),e("p",[e("img",{attrs:{src:"images/3.png",alt:""}})]),t._v(" "),e("h3",{attrs:{id:"操作步骤"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#操作步骤"}},[t._v("#")]),t._v(" 操作步骤")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("myredis目录下新建或者拷贝sentinel.conf文件按，名字绝对不能错")])]),t._v(" "),e("li",[e("p",[t._v("先看看/opt目录下默认的sentinel.conf文件的内容")]),t._v(" "),e("p",[e("img",{attrs:{src:"images/4.png",alt:""}})])]),t._v(" "),e("li",[e("p",[t._v("重要参数项说明")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("bind：服务监听地址，用于客户端连接，默认本机地址")])]),t._v(" "),e("li",[e("p",[t._v("daemonize：是否以后台daemon方式运行")])]),t._v(" "),e("li",[e("p",[t._v("protected-model：安全保护模式")])]),t._v(" "),e("li",[e("p",[t._v("port：端口")])]),t._v(" "),e("li",[e("p",[t._v("logfile：日志文件路径")])]),t._v(" "),e("li",[e("p",[t._v("pidfile：pid文件路径")])]),t._v(" "),e("li",[e("p",[t._v("dir：工作目录")])]),t._v(" "),e("li",[e("p",[t._v("sentinel\\ monitor "),e("master-name",[e("ip",[e("redis-port",[e("quorum")],1)],1)],1)],1),t._v(" "),e("p",[t._v("设置要监控的master服务器")]),t._v(" "),e("p",[t._v("quorum表示最少有几个哨兵认可客观下线，同意故障迁移的法定票数")]),t._v(" "),e("p",[e("img",{attrs:{src:"images/5.png",alt:""}})]),t._v(" "),e("p",[t._v("网络是不可靠的有时候一个sentinel会因为网络堵塞而误以为master redis已经死掉，在sentinel集群环境下需要多个sentinel互相沟通来确认某个master是否真的死掉了，quorum这个参数是进行客观下线的一个依据，意思是至少有quorum个sentinel认为这个master有故障，才会对这个master进行下线以及故障转移。因为有的时候，某个sentinel节点可能因为自身网络原因，导致无法连接master，而此时master并没有出现故障，所以，这就需要多个sentinel都一致认为改master有问题，才可以进行下一步操作，这就保证了公平性和高可用。")])]),t._v(" "),e("li",[e("p",[t._v("sentinel\\ auth-pass "),e("master-name",[e("password")],1)],1),t._v(" "),e("p",[t._v("master设置了密码，连接master服务的密码")])]),t._v(" "),e("li",[e("p",[t._v("其他")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("sentinel down-after-milliseconds "),e("master-name",[e("milliseconds")],1)],1),t._v(" "),e("th",[t._v("指定多少毫秒之后，主节点没有应答哨兵，此时哨兵主观上认为主节点下线")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("sentinel parallel-syncs "),e("master-name",[e("nums")],1)],1),t._v(" "),e("td",[t._v("表示允许并行同步的slave个数，当Master挂了后，哨兵会选出新的Master，此时，剩余的slave会向新的master发起同步数据")])]),t._v(" "),e("tr",[e("td",[t._v("sentinel failover-timeout "),e("master-name",[e("milliseconds")],1)],1),t._v(" "),e("td",[t._v("故障转移的超时时间，进行故障转移时，如果超过设置的毫秒，表示故障转移失败")])]),t._v(" "),e("tr",[e("td",[t._v("sentinel notification-script "),e("master-name",[e("script-path")],1)],1),t._v(" "),e("td",[t._v("配置当某一事件发生时所需要执行的脚本")])]),t._v(" "),e("tr",[e("td",[t._v("sentinel client-reconfig-script "),e("master-name",[e("script-path")],1)],1),t._v(" "),e("td",[t._v("客户端重新配置主节点参数脚本")])])])])])])])])])}),[],!1,null,null,null);e.default=a.exports}}]);