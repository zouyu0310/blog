(window.webpackJsonp=window.webpackJsonp||[]).push([[108],{692:function(n,t,e){"use strict";e.r(t);var i=e(14),a=Object(i.a)({},(function(){var n=this,t=n._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[t("h2",{attrs:{id:"案例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#案例"}},[n._v("#")]),n._v(" 案例")]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v('    public static void main(String[] args) {\n        float a = 72.49f;\n        System.out.println("商品a单价：" + a);\n        int n = 10;\n        System.out.println("购买a数量：" + n);\n        System.out.println("商品a总价：" + a*n);\n\n        double d1 = 0.58D;\n        long n1 = 100L;\n        System.out.println("商品b单价：" + d1);\n        System.out.println("购买b数量：" + n1);\n        System.out.println("商品b总价：" + d1*n1);\n    }\n\n输出: \n商品a单价：72.49\n购买a数量：10\n商品a总价：724.89996\n商品b单价：0.58\n购买b数量：100\n商品b总价：57.99999999999999\n')])])]),t("p",[n._v("结论: 无论是float还是double都出现了金额缺失的情况。")]),n._v(" "),t("p",[n._v("产生丢失精度的原因：浮点数不精确的根本原因在于尾数部分的位数是固定的，一旦需要表示的数字的精度高于浮点数的精度，那么必然产生误差！这在处理金融数据的情况下是绝对不允许存在的。")]),n._v(" "),t("p",[n._v("Java 中 float 的精度为 6-7 位有效数字。double 的精度为 15-16 位，BigDecimal 用来对超过16位有效位的数进行精确的运算")]),n._v(" "),t("h2",{attrs:{id:"使用bigdecimal进行金额计算"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用bigdecimal进行金额计算"}},[n._v("#")]),n._v(" 使用BigDecimal进行金额计算")]),n._v(" "),t("p",[n._v("因为float和double存在精度丢失问题所以在进行数字的精确计算的时候，我们需要通过BigDecmal来进行精确计算。")]),n._v(" "),t("h3",{attrs:{id:"加法-add-函数-减法subtract-函数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#加法-add-函数-减法subtract-函数"}},[n._v("#")]),n._v(" 加法 **add()"),t("strong",[n._v("函数   减法")]),n._v("subtract()**函数")]),n._v(" "),t("h3",{attrs:{id:"乘法-multiply-函数-除法divide-函数-绝对值abs-函数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#乘法-multiply-函数-除法divide-函数-绝对值abs-函数"}},[n._v("#")]),n._v(" 乘法**multiply()"),t("strong",[n._v("函数  除法")]),n._v("divide()**函数  绝对值abs()函数")]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v('    public static void main(String[] args) {\n        BigDecimal num1 = new BigDecimal(0.005);\n        BigDecimal num2 = new BigDecimal(1000000);\n        BigDecimal num3 = new BigDecimal(-1000000);\n        //尽量用字符串的形式初始化\n        BigDecimal num12 = new BigDecimal("0.005");\n        BigDecimal num22 = new BigDecimal("1000000");\n        BigDecimal num32 = new BigDecimal("-1000000");\n        //加法\n        BigDecimal result1 = num1.add(num2);\n        BigDecimal result12 = num12.add(num22);\n\n        System.out.println(result1);\n        System.out.println(result12);\n        //减法\n        BigDecimal result2 = num1.subtract(num2);\n        BigDecimal result22 = num12.subtract(num22);\n        System.out.println(result2);\n        System.out.println(result22);\n\n        //乘法\n        BigDecimal result3 = num1.multiply(num2);\n        BigDecimal result32 = num12.multiply(num22);\n        System.out.println(result3);\n        System.out.println(result32);\n\n        //绝对值\n        BigDecimal result4 = num3.abs();\n        BigDecimal result42 = num32.abs();\n        System.out.println(result4);\n        System.out.println(result42);\n\n        //除法\n        BigDecimal result5 = num2.divide(num1,20,BigDecimal.ROUND_HALF_UP);\n        BigDecimal result52 = num22.divide(num12,20,BigDecimal.ROUND_HALF_UP);\n        System.out.println(result5);\n        System.out.println(result52);\n    }\n    \n 输出: \n1000000.005000000000000000104083408558608425664715468883514404296875\n1000000.005\n-999999.994999999999999999895916591441391574335284531116485595703125\n-999999.995\n5000.000000000000104083408558608425664715468883514404296875000000\n5000.000\n1000000\n1000000\n199999999.99999999583666365766\n200000000.00000000000000000000\n')])])]),t("p",[n._v("使用BigDecimal类构造方法传入double类型时，计算的结果也是不精确的！")]),n._v(" "),t("p",[n._v("因为不是所有的浮点数都能够被精确的表示成一个double 类型值，有些浮点数值不能够被精确的表示成 double 类型值，因此它会被表示成与它最接近的 double 类型的值。必须改用传入String的构造方法。这一点在BigDecimal类的构造方法注释中有说明。")])])}),[],!1,null,null,null);t.default=a.exports}}]);