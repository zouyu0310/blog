(window.webpackJsonp=window.webpackJsonp||[]).push([[136],{726:function(t,n,e){"use strict";e.r(n);var i=e(14),d=Object(i.a)({},(function(){var t=this,n=t._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("hr"),t._v(" "),n("p",[t._v("-- 24h办结率：从接单到处理完毕用时24h以内的总工单量/总接单量\n-- 响应率：从工单发起到接单用时30min以内的总工单量/总接单量\n-- 满意度：当月回访工单的实际分数合计/当月回访工单的饱和分数")]),t._v(" "),n("ol",[n("li",[t._v("30分钟到达率概念和公式")]),t._v(" "),n("li",[t._v("这几个率的时间按工单提报时间还是操作节点的插入时间")]),t._v(" "),n("li",[t._v("满意度计算中未回访的工单是否统计")]),t._v(" "),n("li",[t._v("工单量概念: 是否为已接单 (包含未处理和已处理完成)")])]),t._v(" "),n("p",[t._v("格式:")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("姓名")]),t._v(" "),n("th",[t._v("工单量")]),t._v(" "),n("th",[t._v("24h办结率")]),t._v(" "),n("th",[t._v("30分钟到达率")]),t._v(" "),n("th",[t._v("15分钟响应率")]),t._v(" "),n("th",[t._v("满意度")])])]),t._v(" "),n("tbody",[n("tr",[n("td"),t._v(" "),n("td"),t._v(" "),n("td"),t._v(" "),n("td"),t._v(" "),n("td"),t._v(" "),n("td")])])]),t._v(" "),n("p",[t._v("SQL:")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("-- 计算响应率\nSELECT\noperator,\n    COUNT(*) AS detail_count,\n    SUM(CASE WHEN difftime <= 15 THEN 1 ELSE 0 END) AS diff_count,\n    ROUND(SUM(CASE WHEN difftime <= 15 THEN 1 ELSE 0 END) / COUNT(*), 2) AS ratio\nFROM (\n    SELECT DISTINCT\n        t1.operator,\n        t1.gd_code,\n        t1.id,\n        t1.operate_time,\n        t2.id id2,\n        t2.operate_time operate_time2,\n        round((\n                SUM( IFNULL( unix_timestamp( t1.operate_time ), 0 ) ) - SUM( IFNULL( unix_timestamp( t2.operate_time ), 0 ) ) \n                ) / 60,\n            2 \n        ) difftime \n    FROM\n        work_activity t1\n        LEFT JOIN work_activity t2 ON t1.gd_code = t2.gd_code\n        LEFT JOIN work_list a ON t1.gd_code = a.gd_code\n        LEFT JOIN basic_room AS b ON a.r_id = b.r_id \n    WHERE\n        t1.curr_node = 'gd_node_reception'\n        AND t2.curr_node = 'gd_node_accept' \n        AND t1.id > t2.id \n        AND a.inserttime >= '2022-06-08' \n        AND a.inserttime <= '2023-07-01' \n        AND a.a_id IN ( 'aa4bd0d084bc45119ffe371107e513f1' ) \n    GROUP BY\n        a.gd_code \n) subq\n GROUP BY\n        operator;\n")])])]),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("-- 计算 24h办结率\nSELECT\n\toperator,\n\tCOUNT(*) AS detail_count,\n\tSUM( CASE WHEN difftime <= 24 THEN 1 ELSE 0 END ) AS diff_count,\n\tROUND( SUM( CASE WHEN difftime <= 24 THEN 1 ELSE 0 END ) / COUNT(*), 2 ) AS ratio \nFROM\n\t(\n\tSELECT DISTINCT\n\t\tt1.operator,\n\t\tt1.gd_code,\n\t\tt1.id,\n\t\tt1.operate_time,\n\t\tt2.id id2,\n\t\tt2.operate_time operate_time2,\n\t\tround((\n\t\t\t\tSUM( IFNULL( unix_timestamp( t1.operate_time ), 0 ) ) - SUM( IFNULL( unix_timestamp( t2.operate_time ), 0 ) ) \n\t\t\t\t\n\t\t\t\t - (\n\t\t\t\t\tSUM( IFNULL( unix_timestamp( tt5.operate_time ), 0 ) ) - SUM( IFNULL( unix_timestamp( tt4.operate_time ), 0 ) ) \n\t\t\t\t)\n\t\t\t\t\n\t\t\t\t) / 60 / 60,\n\t\t\t2 \n\t\t) difftime \n\tFROM\n\t\twork_activity t1\n\t\tLEFT JOIN work_activity t2 ON t1.gd_code = t2.gd_code\n\t\tLEFT JOIN work_list a ON t1.gd_code = a.gd_code\n\t\tLEFT JOIN basic_room AS b ON a.r_id = b.r_id \n\t\tLEFT JOIN work_activity tt5 ON tt5.gd_code = t1.gd_code \n\t\tAND tt5.curr_node = 'gd_node_active'\n\t\tLEFT JOIN work_activity tt4 ON tt4.gd_code = t1.gd_code \n\t\tAND tt4.curr_node = 'gd_node_pause'\n\tWHERE\n\t\tt1.curr_node = 'gd_node_finish' -- \t\t\t已接单\n\t\t\n\t\tAND t2.curr_node = 'gd_node_reception' \n\t\tAND t1.id > t2.id \n\t\tAND a.inserttime >= '2022-06-08' \n\t\tAND a.inserttime <= '2023-07-01' \n\t\tAND a.a_id IN ( 'aa4bd0d084bc45119ffe371107e513f1' ) \n\tGROUP BY\n\ta.gd_code \n\t) subq\n")])])]),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("-- 工单数\n\t\n\nselect count(1),uid from (\n\n\nSELECT\n\tt1.*,tbu.uid\nFROM\n\twork_activity t1\n\tleft JOIN work_list t2 on t1.gd_code=t2.gd_code\n\tLEFT JOIN sys_user tbu ON tbu.username = t1.jdr \n\nWHERE\n\t t1.jdr = '邹宇' \n\tAND t1.curr_node IN ( 'gd_node_finish', 'gd_node_handle', 'gd_node_reception' ) \n\tAND t2.inserttime >= '2022-05-19' \n\tAND t2.inserttime <= '2023-07-14' \nGROUP BY\n\t t1.gd_code\n\n\n) tt1\nGROUP BY uid\n")])])]),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("-- 满意度\nSELECT\n\tuid,\n\tCOUNT(*) AS detail_count,\n\tSUM(count ) AS diff_count,\n\tROUND( \tSUM(count ) / (COUNT(*) *5), 2 ) AS ratio \nFROM\n\t(\n\tSELECT DISTINCT\n\tt1.id,\n\tt1.gd_code,\n\tt1.operate_time,\n\tt2.id id2,\n\tti.count,\n\tti.inserttime operate_time2,\n\ttbu.uid \nFROM\n\twork_activity t1\n\tLEFT JOIN work_activity t2 ON t1.gd_code = t2.gd_code\n\tLEFT JOIN work_list a ON t1.gd_code = a.gd_code \n\tAND a.if_backvisit = '1' \n\tAND a.if_backvisit_again = '1'\n\tLEFT JOIN work_interview ti ON t1.gd_code = ti.gd_code\n\tLEFT JOIN basic_room AS b ON a.r_id = b.r_id\n\tLEFT JOIN work_activity wa3 ON a.gd_code = wa3.gd_code \n\tAND wa3.curr_node = 'gd_node_reception'\n\tLEFT JOIN sys_user tbu ON tbu.username = wa3.jdr \nWHERE\n\tt1.id >= t2.id \n\tAND LENGTH(\n\tifnull( xj_plan_id, 0 )) != 32 \n\tAND a.inserttime >= '2022-05-19' \n\tAND a.inserttime <= '2023-07-14' \n\tAND a.a_id IN ( 'aa4bd0d084bc45119ffe371107e513f1' ) \n\tAND wa3.jdr = '邹宇' \nGROUP BY\n\ta.gd_code \nORDER BY\n\tt1.id,\n\tt2.id DESC\n\t) subq\nGROUP BY uid\n\n\n")])])]),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("-- 30分钟到达率\nSELECT\n\tu_id,\n\tCOUNT(*) AS detail_count,\n\tSUM( CASE WHEN difftime <= 30 THEN 1 ELSE 0 END ) AS diff_count,\n\tROUND( SUM( CASE WHEN difftime <= 30 THEN 1 ELSE 0 END ) / COUNT(*), 2 ) AS ratio \nFROM\n\t(\n\tSELECT DISTINCT\n\t\tt1.operator u_id,\n\t\tt1.gd_code,\n\t\tt1.id,\n\t\tt1.operate_time,\n\t\tt2.id id2,\n\t\tt2.operate_time operate_time2,\n\t\tround((\n\t\t\t\tSUM( IFNULL( unix_timestamp( t1.operate_time ), 0 ) ) - SUM( IFNULL( unix_timestamp( t2.operate_time ), 0 ) ) \n\t\t\t\t) / 60,\n\t\t\t2 \n\t\t) difftime \n\tFROM\n\t\twork_activity t1\n\t\tLEFT JOIN work_activity t2 ON t1.gd_code = t2.gd_code\n\t\tLEFT JOIN work_list a ON t1.gd_code = a.gd_code\n\t\tLEFT JOIN basic_room AS b ON a.r_id = b.r_id \n\t\tWHERE-- \t\tgd_node_daoda\n\t\tt1.curr_node = 'gd_node_daoda' \n\t\tAND t2.curr_node = 'gd_node_reception' \n\t\tAND t1.id > t2.id \n\t\tAND a.inserttime >= '2022-06-08' \n\t\tAND a.inserttime <= '2023-07-01' \n\t\tAND a.a_id IN ( 'aa4bd0d084bc45119ffe371107e513f1' ) \n\tGROUP BY\n\t\ta.gd_code \n\t) subq \nGROUP BY\n\tu_id\n")])])])])}),[],!1,null,null,null);n.default=d.exports}}]);