(window.webpackJsonp=window.webpackJsonp||[]).push([[434],{1074:function(e,a,n){"use strict";n.r(a);var s=n(14),t=Object(s.a)({},(function(){var e=this,a=e._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h2",{attrs:{id:"_26-怎么禁止自我保护"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_26-怎么禁止自我保护"}},[e._v("#")]),e._v(" 26_怎么禁止自我保护")]),e._v(" "),a("ul",[a("li",[e._v("在eurekaServer端7001处设置关闭自我保护机制")])]),e._v(" "),a("p",[e._v("出厂默认，自我保护机制是开启的")]),e._v(" "),a("p",[e._v("使用"),a("code",[e._v("eureka.server.enable-self-preservation = false")]),e._v("可以禁用自我保护模式")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("eureka:\n  ...\n  server:\n    #关闭自我保护机制，保证不可用服务被及时踢除\n    enable-self-preservation: false\n    eviction-interval-timer-in-ms: 2000\n\n")])])]),a("p",[e._v("关闭效果：")]),e._v(" "),a("p",[e._v("spring-eureka主页会显示出一句：")]),e._v(" "),a("p",[a("strong",[e._v("THE SELF PRESERVATION MODE IS TURNED OFF. THIS MAY NOT PROTECT INSTANCE EXPIRY IN CASE OF NETWORK/OTHER PROBLEMS.")])]),e._v(" "),a("ul",[a("li",[e._v("生产者客户端eureakeClient端8001")])]),e._v(" "),a("p",[e._v("默认：")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("eureka.instance.lease-renewal-interval-in-seconds=30\neureka.instance.lease-expiration-duration-in-seconds=90\n")])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("eureka:\n  ...\n  instance:\n    instance-id: payment8001\n    prefer-ip-address: true\n    #心跳检测与续约时间\n    #开发时没置小些，保证服务关闭后注册中心能即使剔除服务\n    #Eureka客户端向服务端发送心跳的时间间隔，单位为秒(默认是30秒)\n    lease-renewal-interval-in-seconds: 1\n    #Eureka服务端在收到最后一次心跳后等待时间上限，单位为秒(默认是90秒)，超时将剔除服务\n    lease-expiration-duration-in-seconds: 2\n\n")])])]),a("ul",[a("li",[e._v("测试\n"),a("ul",[a("li",[e._v("7001和8001都配置完成")]),e._v(" "),a("li",[e._v("先启动7001再启动8001")])])])]),e._v(" "),a("p",[e._v("结果：先关闭8001，马上被删除了")])])}),[],!1,null,null,null);a.default=t.exports}}]);