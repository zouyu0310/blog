(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{1062:function(s,t,a){"use strict";a.r(t);var n=a(14),c=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"_109-nacos集群配置-上-linux版本安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_109-nacos集群配置-上-linux版本安装"}},[s._v("#")]),s._v(" 109_Nacos集群配置(上)Linux版本安装")]),s._v(" "),t("p",[s._v("预计需要，1个Nginx+3个nacos注册中心+1个mysql")]),s._v(" "),t("p",[s._v("nacos解压到 /usr/local下")]),s._v(" "),t("p",[t("strong",[s._v("application.properties配置")])]),s._v(" "),t("p",[s._v("nacos/conf文件下")]),s._v(" "),t("p",[s._v("添加以下内容，设置数据源")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("spring.datasource.platform=mysql\n\ndb.num=1\ndb.url.0=jdbc:mysql://localhost:3306/nacos_config?characterEncoding=utf8&connectTimeout=1000&socketTimeout=3000&autoReconnect=true\ndb.user=root\ndb.password=XXXX\n\n")])])]),t("p",[t("strong",[s._v("Linux服务器上nacos的集群配置cluster.conf")])]),s._v(" "),t("p",[s._v("梳理出3台nacos集器的不同服务端口号，设置3个端口：")]),s._v(" "),t("ul",[t("li",[s._v("3333")]),s._v(" "),t("li",[s._v("4444")]),s._v(" "),t("li",[s._v("5555")])]),s._v(" "),t("p",[s._v("nacos/conf文件下 -- 先复制出来一份")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("cp cluster.conf.example  cluster.conf\n")])])]),t("p",[s._v("内容:")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("172.31.241.249:3333\n172.31.241.249:4444\n172.31.241.249:5555\n")])])]),t("p",[t("strong",[s._v("注意")]),s._v("，这个IP不能写127.0.0.1，必须是Linux命令"),t("code",[s._v("hostname -i")]),s._v("能够识别的IP")]),s._v(" "),t("p",[t("strong",[s._v("编辑Nacos的启动脚本startup.sh，使它能够接受不同的启动端口")])]),s._v(" "),t("p",[s._v("/nacos/bin目录下有startup.sh")]),s._v(" "),t("p",[s._v("平时单机版的启动，都是./startup.sh即可")]),s._v(" "),t("p",[s._v("但是，集群启动，我们希望可以类似其它软件的shell命令，传递不同的端口号启动不同的nacos实例。\n命令: ./startup.sh -p 3333表示启动端口号为3333的nacos服务器实例，和上一步的cluster.conf配置的一致。")]),s._v(" "),t("p",[s._v("修改内容")]),s._v(" "),t("p",[t("img",{attrs:{src:a(542),alt:"image-20220104213248646"}})]),s._v(" "),t("p",[s._v("注意: nacos2.0.3不需要修改此配置")]),s._v(" "),t("p",[t("img",{attrs:{src:a(543),alt:"image-20220104213739636"}})]),s._v(" "),t("p",[s._v("执行方式 - "),t("code",[s._v("startup.sh - p 端口号")])]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("./startup.sh -p 3333\n./startup.sh -p 4444\n./startup.sh -p 5555\n")])])])])}),[],!1,null,null,null);t.default=c.exports},542:function(s,t,a){s.exports=a.p+"assets/img/20220104213255.30718115.png"},543:function(s,t,a){s.exports=a.p+"assets/img/image-20220104213739636.12d6c01b.png"}}]);