(window.webpackJsonp=window.webpackJsonp||[]).push([[185],{792:function(a,t,e){"use strict";e.r(t);var s=e(14),r=Object(s.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h2",{attrs:{id:"windows映射"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#windows映射"}},[a._v("#")]),a._v(" windows映射")]),a._v(" "),t("p",[a._v("需要把盘符变成 /")]),a._v(" "),t("p",[a._v("如: D盘映射需改为 /D/")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("docker run -d -p 3308:3306  --privileged=true -v /D/data/docker/data/mysql:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=XXX  --name mysql8test2 mysql:8\n")])])]),t("p",[a._v("可能存在文件映射失败的问题，那就要修改 docker软件里面的映射盘符")]),a._v(" "),t("h2",{attrs:{id:"迁移"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#迁移"}},[a._v("#")]),a._v(" 迁移")]),a._v(" "),t("ol",[t("li",[a._v("Docker Desktop 默认存储位置是 "),t("code",[a._v("C:\\用户\\Administrator\\AppData\\Local\\Docker\\wsl\\")])]),a._v(" "),t("li",[a._v("Docker Desktop 通过 WSL2 启动，会自动创建 2 个子系统，分别对应 2 个 vhdx 硬盘映像文件")]),a._v(" "),t("li",[a._v("任务栏右下角 Docker Desktop 图标右键，退出程序")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("C:\\Users>wsl --list -v\n  NAME                   STATE           VERSION\n* docker-desktop-data    Stopped         2\n  docker-desktop         Running         2\n")])])]),t("ol",[t("li",[a._v("执行 "),t("code",[a._v("wsl --list -v")]),a._v(" 命令查看，确认 "),t("code",[a._v("STATE")]),a._v(" 状态变为 "),t("code",[a._v("Stopped")])]),a._v(" "),t("li",[a._v("执行 "),t("code",[a._v("wsl --shutdown")]),a._v(" 关闭 WSL")]),a._v(" "),t("li",[a._v("从 WSL 把镜像 "),t("code",[a._v("\\data\\ext4.vhdx")]),a._v(" 导出到压缩文件 "),t("code",[a._v("docker-desktop-data.tar")]),a._v("，导出路径应提前创建好，否则导出到不存在的路径会报错")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("wsl --export docker-desktop-data D:\\data\\wsl\\data\\docker-desktop-data.tar\n")])])]),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("wsl --export docker-desktop D:\\data\\wsl\\data\\docker-desktop.tar\n")])])]),t("p",[a._v("注销原镜像和程序")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("wsl --unregister docker-desktop-data\nwsl --unregister docker-desktop\n")])])]),t("p",[a._v("从 tar 文件，将导出的 Docker 镜像再导入回 WSL，并设置挂载目录")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("wsl --import docker-desktop-data D:\\data\\wsl\\data  D:\\data\\wsl\\data\\docker-desktop-data.tar \nwsl --import docker-desktop D:\\data\\wsl D:\\data\\wsl\\data\\docker-desktop.tar\n")])])]),t("p",[a._v("重新启动 Docker Desktop 即可")])])}),[],!1,null,null,null);t.default=r.exports}}]);