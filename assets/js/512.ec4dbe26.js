(window.webpackJsonp=window.webpackJsonp||[]).push([[512],{1184:function(s,e,t){"use strict";t.r(e);var n=t(14),r=Object(n.a)({},(function(){var s=this,e=s._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"sentinel通用配置及主从配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#sentinel通用配置及主从配置"}},[s._v("#")]),s._v(" sentinel通用配置及主从配置")]),s._v(" "),e("h3",{attrs:{id:"sentinel26379-conf、sentinel26380-conf、sentinel26381-conf"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#sentinel26379-conf、sentinel26380-conf、sentinel26381-conf"}},[s._v("#")]),s._v(" sentinel26379.conf、sentinel26380.conf、sentinel26381.conf")]),s._v(" "),e("p",[e("img",{attrs:{src:"images/6.png",alt:""}})]),s._v(" "),e("h3",{attrs:{id:"最终配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#最终配置"}},[s._v("#")]),s._v(" 最终配置")]),s._v(" "),e("p",[e("img",{attrs:{src:"images/7.png",alt:""}})]),s._v(" "),e("h3",{attrs:{id:"master主机配置文件说明"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#master主机配置文件说明"}},[s._v("#")]),s._v(" master主机配置文件说明")]),s._v(" "),e("p",[s._v("理论上sentinel配置文件应该部署在不同的服务器上，做成集群，但是本次演示将其放到一台机器上")]),s._v(" "),e("p",[e("img",{attrs:{src:"images/8.png",alt:""}})]),s._v(" "),e("h3",{attrs:{id:"先启动一主二从3个redis实例-测试正常的主从复制"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#先启动一主二从3个redis实例-测试正常的主从复制"}},[s._v("#")]),s._v(" 先启动一主二从3个redis实例，测试正常的主从复制")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("架构说明")]),s._v(" "),e("p",[e("img",{attrs:{src:"images/9.png",alt:""}})])]),s._v(" "),e("li",[e("p",[s._v("主机6379配置修改")]),s._v(" "),e("p",[e("img",{attrs:{src:"images/10.png",alt:""}})]),s._v(" "),e("p",[s._v("6379后续可能会变成从机，需要设置访问新主机的密码，所以此处会设置masterauth，"),e("strong",[s._v("不然后续可能会报错 master_link_status:down")])])]),s._v(" "),e("li",[e("p",[s._v("3台不同的虚拟机实例，启动三台真是机器实例并连接")]),s._v(" "),e("p",[s._v("redis-server redis6379.conf")]),s._v(" "),e("p",[s._v("redis-server redis6380.conf")]),s._v(" "),e("p",[s._v("redis-server redis6381.conf")]),s._v(" "),e("p",[s._v("redis-cli -a 123456 -p 6379")]),s._v(" "),e("p",[s._v("redis-cli -a 123456 -p 6380")]),s._v(" "),e("p",[s._v("redis-cli -a 123456 -p 6381")])]),s._v(" "),e("li",[e("p",[s._v("sentinel的两种启动方式")]),s._v(" "),e("p",[e("img",{attrs:{src:"images/11.png",alt:""}})])]),s._v(" "),e("li",[e("p",[s._v("再启动3个哨兵监控后再测试一次主从复制")]),s._v(" "),e("p",[s._v("redis-server sentinel26379.conf --sentinel")]),s._v(" "),e("p",[s._v("redis-server sentinel26380.conf --sentinel")]),s._v(" "),e("p",[s._v("redis-server sentinel26381.conf --sentinel")]),s._v(" "),e("p",[e("img",{attrs:{src:"images/12.png",alt:""}})])])]),s._v(" "),e("p",[s._v("启动后我们会发现sentinel配置文件会自动在配置文件中加上部分配置")]),s._v(" "),e("p",[e("img",{attrs:{src:"images/13.png",alt:""}})])])}),[],!1,null,null,null);e.default=r.exports}}]);