(window.webpackJsonp=window.webpackJsonp||[]).push([[483],{1142:function(a,s,t){"use strict";t.r(s);var n=t(14),o=Object(n.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"若依-nacos配置-明细"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#若依-nacos配置-明细"}},[a._v("#")]),a._v(" 若依&Nacos配置(明细)")]),a._v(" "),s("h2",{attrs:{id:"微服务版技术选型"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#微服务版技术选型"}},[a._v("#")]),a._v(" 微服务版技术选型")]),a._v(" "),s("p",[a._v("采用前后端分离的模式，微服务版本前端(基于 RuoYi-Vue)。")]),a._v(" "),s("p",[a._v("后端采用Spring Boot、Spring Cloud & Alibaba。")]),a._v(" "),s("p",[a._v("注册中心、配置中心选型Nacos，权限认证使用Redis。")]),a._v(" "),s("p",[a._v("流量控制框架选型Sentinel。")]),a._v(" "),s("h2",{attrs:{id:"系统模块"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#系统模块"}},[a._v("#")]),a._v(" 系统模块")]),a._v(" "),s("h4",{attrs:{id:"后端"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#后端"}},[a._v("#")]),a._v(" 后端")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("com.ruoyi     \n├── ruoyi-ui              // 前端框架 [80]\n├── ruoyi-gateway         // 网关模块 [8080]\n├── ruoyi-auth            // 认证中心 [9200]\n├── ruoyi-api             // 接口模块\n│       └── ruoyi-api-system                          // 系统接口\n├── ruoyi-common          // 通用模块\n│       └── ruoyi-common-core                         // 核心模块\n│       └── ruoyi-common-datascope                    // 权限范围\n│       └── ruoyi-common-datasource                   // 多数据源\n│       └── ruoyi-common-log                          // 日志记录\n│       └── ruoyi-common-redis                        // 缓存服务\n│       └── ruoyi-common-security                     // 安全模块\n│       └── ruoyi-common-swagger                      // 系统接口\n├── ruoyi-modules         // 业务模块\n│       └── ruoyi-system                              // 系统模块 [9201]\n│       └── ruoyi-gen                                 // 代码生成 [9202]\n│       └── ruoyi-job                                 // 定时任务 [9203]\n│       └── ruoyi-file                                // 文件服务 [9300]\n├── ruoyi-visual          // 图形化管理模块\n│       └── ruoyi-visual-monitor                      // 监控中心 [9100]\n├──pom.xml                // 公共依赖\n\nRuoYiGatewayApplication （网关模块 必须）\nRuoYiAuthApplication （认证模块 必须）\nRuoYiSystemApplication （系统模块 必须）\nRuoYiMonitorApplication （监控中心 可选）\nRuoYiGenApplication （代码生成 可选）\nRuoYiJobApplication （定时任务 可选）\nRuoYFileApplication （文件服务 可选）\n")])])]),s("h4",{attrs:{id:"前端"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前端"}},[a._v("#")]),a._v(" 前端")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("├── build                      // 构建相关  \n├── bin                        // 执行脚本\n├── public                     // 公共文件\n│   ├── favicon.ico            // favicon图标\n│   └── index.html             // html模板\n├── src                        // 源代码\n│   ├── api                    // 所有请求\n│   ├── assets                 // 主题 字体等静态资源\n│   ├── components             // 全局公用组件\n│   ├── directive              // 全局指令\n│   ├── layout                 // 布局\n│   ├── router                 // 路由\n│   ├── store                  // 全局 store管理\n│   ├── utils                  // 全局公用方法\n│   ├── views                  // view\n│   ├── App.vue                // 入口页面\n│   ├── main.js                // 入口 加载组件 初始化等\n│   ├── permission.js          // 权限管理\n│   └── settings.js            // 系统配置\n├── .editorconfig              // 编码格式\n├── .env.development           // 开发环境配置\n├── .env.production            // 生产环境配置\n├── .env.staging               // 测试环境配置\n├── .eslintignore              // 忽略语法检查\n├── .eslintrc.js               // eslint 配置项\n├── .gitignore                 // git 忽略项\n├── babel.config.js            // babel.config.js\n├── package.json               // package.json\n└── vue.config.js              // vue.config.js\n")])])]),s("h2",{attrs:{id:"架构图"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#架构图"}},[a._v("#")]),a._v(" 架构图")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://alidocs.oss-cn-zhangjiakou.aliyuncs.com/res/7mxPOGkDQ4N2OKa9/img/c7512567-8906-477d-ba16-539a1e95e739.png",alt:"image"}})]),a._v(" "),s("h1",{attrs:{id:"框架运行详述"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#框架运行详述"}},[a._v("#")]),a._v(" 框架运行详述")]),a._v(" "),s("h2",{attrs:{id:"前期准备工作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前期准备工作"}},[a._v("#")]),a._v(" 前期准备工作")]),a._v(" "),s("p",[a._v("1.电脑上JDK 、Maven、Mysql、Node、IDEA、Git这些基本的开发环境必备已经安装完成。")]),a._v(" "),s("p",[a._v("JDK >= 1.8 (推荐1.8版本)")]),a._v(" "),s("p",[a._v("Mysql >= 5.5.0 (推荐5.7版本)")]),a._v(" "),s("p",[a._v("Redis >= 3.0")]),a._v(" "),s("p",[a._v("Maven >= 3.0")]),a._v(" "),s("p",[a._v("Node >= 10")]),a._v(" "),s("p",[a._v("nacos >= 1.1.0")]),a._v(" "),s("p",[a._v("2.项目需要连接Redis，所以需要在本机安装Redis服务端：")]),a._v(" "),s("p",[a._v("Windows中Redis的下载安装与修改密码并启动。")]),a._v(" "),s("p",[a._v("3.项目需要Nacos并需要持久化到Mysql数据库。")]),a._v(" "),s("p",[a._v("Nacos简介、下载与配置持久化到Mysql。")]),a._v(" "),s("p",[a._v("注意这里的持久化算连接的数据库是Nacos所带的初始化的数据库，这里需要连接若依的数据库，所以只需要在本地配置好Nacos，等待若依的数据库新建完成再连接若依的数据库。")]),a._v(" "),s("h2",{attrs:{id:"拉取项目代码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#拉取项目代码"}},[a._v("#")]),a._v(" 拉取项目代码")]),a._v(" "),s("p",[a._v("项目地址：")]),a._v(" "),s("p",[s("a",{attrs:{href:"https://gitee.com/y_project/RuoYi-Cloud",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://gitee.com/y_project/RuoYi-Cloud"),s("OutboundLink")],1)]),a._v(" "),s("p",[a._v("将代码从码云克隆到本地。然后使用IDEA打开，项目目录如下")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://alidocs.oss-cn-zhangjiakou.aliyuncs.com/res/7mxPOGkDQ4N2OKa9/img/5a39b982-ff57-4237-95b5-65a2f00adcd4.png",alt:"image"}})]),a._v(" "),s("h2",{attrs:{id:"初始化数据库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#初始化数据库"}},[a._v("#")]),a._v(" 初始化数据库")]),a._v(" "),s("p",[a._v("在上面下载的源码的sql文件夹下有三个sql文件")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://alidocs.oss-cn-zhangjiakou.aliyuncs.com/res/7mxPOGkDQ4N2OKa9/img/b1c20de0-e47b-4f02-8fe1-89e88fe6916c.png",alt:"image"}})]),a._v(" "),s("p",[a._v("打开Navicat连接本地Mysql数据库")]),a._v(" "),s("p",[a._v("新建数据库ry-cloud,然后在此数据库下执行ry_20200924.sql和quartz.sql这两个sql文件。")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://alidocs.oss-cn-zhangjiakou.aliyuncs.com/res/7mxPOGkDQ4N2OKa9/img/bd14f535-7904-4b0f-8e45-28cabc19c677.png",alt:"image"}})]),a._v(" "),s("p",[a._v("上面的数据是系统运行时的一些基础数据。")]),a._v(" "),s("p",[a._v("然后再新建数据库ry-config，在此数据库下执行ry_config_20200924.sql这个sql文件。")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://alidocs.oss-cn-zhangjiakou.aliyuncs.com/res/7mxPOGkDQ4N2OKa9/img/d198ddcf-257c-49f2-9f7d-a0a0da568b32.png",alt:"image"}})]),a._v(" "),s("p",[a._v("这个数据库就是前面nacos进行数据持久化到Mysql数据库的数据库。")]),a._v(" "),s("h2",{attrs:{id:"配置nacos持久化到数据库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置nacos持久化到数据库"}},[a._v("#")]),a._v(" 配置Nacos持久化到数据库")]),a._v(" "),s("p",[a._v("来到Nacos的解压目录下的conf下的application.properties文件中，将连接到外置本地数据库的代码去掉注释并修改为")]),a._v(" "),s("p",[a._v("自己的数据库和用户名和密码")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://alidocs.oss-cn-zhangjiakou.aliyuncs.com/res/7mxPOGkDQ4N2OKa9/img/fd9d9c10-2e7b-48a1-a8b0-0199b13ca152.png",alt:"image"}})]),a._v(" "),s("p",[a._v("修改的代码内容")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("spring.datasource.platform=mysql\n\n### Count of DB:\ndb.num=1\n\n### Connect URL of DB:\ndb.url.0=jdbc:mysql://127.0.0.1:3306/ry-config?characterEncoding=utf8&connectTimeout=1000&socketTimeout=3000&autoReconnect=true&useUnicode=true&useSSL=false&serverTimezone=UTC\ndb.user=root\ndb.password=123456\n")])])]),s("p",[a._v("然后启动Nacos")]),a._v(" "),s("p",[a._v("但是在执行若依的ry_config的sql文件时并没有在users表中添加默认的nacos的用户，所以新建一个数据库nacos_config，并执行Nacos安装目录下")]),a._v(" "),s("p",[a._v("的conf下的nacos-mysql.sql文件")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://alidocs.oss-cn-zhangjiakou.aliyuncs.com/res/7mxPOGkDQ4N2OKa9/img/3046f6c4-bd19-416b-afca-fe659d9f58f3.png",alt:"image"}})]),a._v(" "),s("p",[a._v("这样你就能获取到Nacos的默认的用户名和密码。")]),a._v(" "),s("p",[a._v("将其手动复制到前面若依自带的sql导入的ry-config数据库中的users表中")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("name:1\n\npassword:$2a$10$EuWPZHzz32dJN7jexM34MOeYirDdFAZm2kuWj7VEOJhhZkDrxfvUu\n\nenabled:1\n")])])]),s("p",[a._v("这样就能登录Nacos的控制台并修改系统相关配置文件的连接数据库的配置文件。")]),a._v(" "),s("h2",{attrs:{id:"通过nacos配置连接数据库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#通过nacos配置连接数据库"}},[a._v("#")]),a._v(" 通过Nacos配置连接数据库")]),a._v(" "),s("p",[a._v("前面修改完nacos的conf下的aplication.properties中的连接外置数据库的操作之后，回到上一级的bin下，将startup.cmd中修改为单点模式。")]),a._v(" "),s("p",[a._v("具体操作可以参照上面的博客。")]),a._v(" "),s("p",[a._v("然后启动nacos，打来浏览器输入：")]),a._v(" "),s("p",[s("a",{attrs:{href:"http://localhost:8848/nacos",target:"_blank",rel:"noopener noreferrer"}},[a._v("http://localhost:8848/nacos"),s("OutboundLink")],1)]),a._v(" "),s("p",[a._v("登录的用户名和密码都为nacos")]),a._v(" "),s("p",[a._v("登录成功之后")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://alidocs.oss-cn-zhangjiakou.aliyuncs.com/res/7mxPOGkDQ4N2OKa9/img/df1f4340-4559-4daf-80b5-d6b08c60c486.png",alt:"image"}})]),a._v(" "),s("p",[a._v("此时项目中的所有的配置文件都会显示，然后从上往下挨个编辑，把设计到连接Mysql和Redis的所有地方，改为自己对应的用户名和密码。")]),a._v(" "),s("h2",{attrs:{id:"后端项目启动"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#后端项目启动"}},[a._v("#")]),a._v(" 后端项目启动")]),a._v(" "),s("p",[a._v("在启动后端项目之前，你需要本地启动Redis服务端，以及Nacos")]),a._v(" "),s("p",[a._v("核心微服务")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("startruoyi-gateway下的启动类RuoYiGatewayApplication启动\n\nruoyi-auth下的启动类RuoYiAuthApplication启动\n\nruoyi-modules下的ruoyi-system下的RuoYiSystemApplication\n")])])]),s("p",[a._v("如果这三个模块都没有报错则后端启动成功")]),a._v(" "),s("p",[a._v("并且可以在Nacos中发现这三个服务")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://alidocs.oss-cn-zhangjiakou.aliyuncs.com/res/7mxPOGkDQ4N2OKa9/img/0993ea7f-b4fa-407c-ac20-b80c2bf31530.png",alt:"image"}})]),a._v(" "),s("h2",{attrs:{id:"前端项目启动"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前端项目启动"}},[a._v("#")]),a._v(" 前端项目启动")]),a._v(" "),s("p",[a._v("前端项目的位置在ruoyi-ui下")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://alidocs.oss-cn-zhangjiakou.aliyuncs.com/res/7mxPOGkDQ4N2OKa9/img/c07884ab-2473-483d-8dc2-37b62557aafa.png",alt:"image"}})]),a._v(" "),s("p",[a._v("右击此项目-Open in Terminal,输入")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("npm install\n")])])]),s("p",[a._v("安装项目依赖，然后启动")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("npm run dev\n")])])]),s("p",[a._v("运行前端项目")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://alidocs.oss-cn-zhangjiakou.aliyuncs.com/res/7mxPOGkDQ4N2OKa9/img/b9d4c6c4-0a36-4dcb-89d1-365aa661b217.png",alt:"image"}})]),a._v(" "),s("p",[a._v("默认端口是80端口，至此微服务版开发环境部署成功。其他配置参考知识库同文件夹下 -- 项目启动简版")])])}),[],!1,null,null,null);s.default=o.exports}}]);