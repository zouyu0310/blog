(window.webpackJsonp=window.webpackJsonp||[]).push([[140],{732:function(a,s,t){"use strict";t.r(s);var n=t(14),e=Object(n.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("ul",[s("li",[s("a",{attrs:{href:"#%E5%AE%98%E7%BD%91%E7%9B%B8%E5%85%B3%E6%95%99%E7%A8%8B"}},[a._v("官网相关教程")])]),a._v(" "),s("li",[s("a",{attrs:{href:"#%E5%AE%89%E8%A3%85elasticsearch"}},[a._v("安装ElasticSearch")]),a._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#windows-%E7%89%88%E6%9C%AC"}},[a._v("windows 版本")])]),a._v(" "),s("li",[s("a",{attrs:{href:"#linux-%E7%89%88%E6%9C%AC"}},[a._v("linux 版本")])]),a._v(" "),s("li",[s("a",{attrs:{href:"#%E4%BD%BF%E7%94%A8-docker"}},[a._v("使用 Docker")])])])]),a._v(" "),s("li",[s("a",{attrs:{href:"#%E9%85%8D%E7%BD%AE%E5%AF%86%E7%A0%81%E8%AE%BF%E9%97%AE"}},[a._v("配置密码访问")])])]),a._v(" "),s("h2",{attrs:{id:"官网相关教程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#官网相关教程"}},[a._v("#")]),a._v(" 官网相关教程")]),a._v(" "),s("blockquote",[s("p",[a._v("安装ElasticSearch还是先要看下官方网站。")])]),a._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://www.elastic.co/cn/",target:"_blank",rel:"noopener noreferrer"}},[a._v("官方网站"),s("OutboundLink")],1)]),a._v(" "),s("li",[s("a",{attrs:{href:"https://www.elastic.co/guide/cn/elasticsearch/guide/current/running-elasticsearch.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("官方2.x中文教程中安装教程"),s("OutboundLink")],1)]),a._v(" "),s("li",[s("a",{attrs:{href:"https://www.elastic.co/cn/downloads/elasticsearch",target:"_blank",rel:"noopener noreferrer"}},[a._v("官方ElasticSearch下载地址"),s("OutboundLink")],1)]),a._v(" "),s("li",[s("a",{attrs:{href:"https://www.elastic.co/cn/downloads/kibana",target:"_blank",rel:"noopener noreferrer"}},[a._v("官方Kibana下载地址"),s("OutboundLink")],1)])]),a._v(" "),s("p",[a._v("本系列教程基于ElasticSearch 7.x版本。")]),a._v(" "),s("h2",{attrs:{id:"安装elasticsearch"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装elasticsearch"}},[a._v("#")]),a._v(" 安装ElasticSearch")]),a._v(" "),s("p",[s("font",{staticStyle:{color:"red"}},[a._v("ElasticSearch 是使用 java 开发的，且本版本的 es 需要的 jdk 版本要是 1.8 以上，所以安装ElasticSearch 之前保证 JDK1.8+ ，并正确的配置好JDK环境变量，否则会启动ElasticSearch失败。")])],1),a._v(" "),s("h3",{attrs:{id:"windows-版本"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#windows-版本"}},[a._v("#")]),a._v(" windows 版本")]),a._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"title"},[a._v("ElasticSearch")])]),s("p",[a._v("win下载：https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-7.6.1.zip")]),a._v(" "),s("ul",[s("li",[a._v("文件：")])]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("bin：启动文件\nconfig：配置文件\n    log4j2.properties：日志配置文件\n    jvm.options：java虚拟机的配置\n    elasticsearch.yml：es的配置文件\ndata：索引数据目录\nlib：相关类库Jar包\nlogs：日志目录\nmodules：功能模块\nplugins：插件\n")])])]),s("ul",[s("li",[a._v("启动：")])]),a._v(" "),s("p",[a._v("双击 ElasticSearch 下的 bin 目录中的 elasticsearch.bat 启动")]),a._v(" "),s("ul",[s("li",[a._v("访问：")])]),a._v(" "),s("p",[a._v("http://localhost:9200")]),a._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"title"},[a._v("安装ES的图形化界面插件客户端Head")])]),s("p",[a._v("注意：需要 NodeJS 的环境")]),a._v(" "),s("p",[a._v("Head 是 elasticsearch 的集群管理工具，可以用于数据的浏览查询！被托管在 github 上面！")]),a._v(" "),s("p",[a._v("地址： https://github.com/mobz/elasticsearch-head/")]),a._v(" "),s("p",[s("strong",[a._v("1、下载并解压")])]),a._v(" "),s("p",[a._v("下载 elasticsearch-head-master.zip")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#安装依赖！")]),a._v("\ncnpm "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#运行")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" run start\n")])])]),s("p",[s("strong",[a._v("2、修改配置文件 "),s("code",[a._v("elasticsearch.yml")])])]),a._v(" "),s("p",[a._v("由于 ES 进程和客户端进程端口号不同，存在跨域问题，所以我们要在 ES 的配置文件中配置下跨域问题")]),a._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 跨域配置：")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("http.cors.enabled")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[a._v("true")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("http.cors.allow-origin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"*"')]),a._v("\n")])])]),s("p",[s("strong",[a._v("3、启动测试")])]),a._v(" "),s("p",[a._v("启动 ElasticSearch")]),a._v(" "),s("p",[a._v("并使用head工具进行连接测试！")]),a._v(" "),s("p",[a._v("访问url：http://localhost:9100/")]),a._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"title"},[a._v("安装Kibana")])]),s("p",[a._v("Kibana 是一个针对 Elasticsearch 的开源分析及可视化平台，用来搜索、查看交互存储在 Elasticsearch 索引中的数据。")]),a._v(" "),s("p",[a._v("使用Kibana，可以通过各种图表进行高级数据分析及展示。Kibana让海量数据更容易理解。它操作简单，基于浏览器的用户界面可以快速创建仪表板（dashboard）实时显示Elasticsearch查询动态。")]),a._v(" "),s("p",[a._v("设置Kibana非常简单。无需编码或者额外的基础架构，几分钟内就可以完成Kibana安装并启动 Elasticsearch索引监测。")]),a._v(" "),s("ul",[s("li",[s("strong",[a._v("下载Kibana")])])]),a._v(" "),s("p",[a._v("注意版本对应关系： https://www.elastic.co/cn/downloads/kibana")]),a._v(" "),s("p",[a._v("解压后进入，双击 "),s("code",[a._v("kibana.bat")]),a._v(" 启动服务就可以了，ELK基本上都是拆箱即用的")]),a._v(" "),s("p",[a._v("然后访问 http://localhost:5601/")]),a._v(" "),s("p",[a._v("kibana会自动去访问9200，也就是 elasticsearch 的端口号（当然 elasticsearch 这个时候必须启动着），然后就可以使用 kibana 了！")]),a._v(" "),s("ul",[s("li",[s("strong",[a._v("访问界面是英文，可修改成中文")])])]),a._v(" "),s("p",[a._v("只需要在配置文件 kibana.yml 中加入")]),a._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("i18n.locale")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"zh-CN"')]),a._v("\n")])])]),s("p",[a._v("重启即可！")]),a._v(" "),s("h3",{attrs:{id:"linux-版本"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#linux-版本"}},[a._v("#")]),a._v(" linux 版本")]),a._v(" "),s("p",[s("mark",[a._v("请先确保安装了 jdk1.8 以上版本")])]),a._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"title"},[a._v("安装ElasticSearch")])]),s("ul",[s("li",[s("strong",[a._v("进入一个目录，下载")])])]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-O")]),a._v(" https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-7.6.1-linux-x86_64.tar.gz\n")])])]),s("ul",[s("li",[s("strong",[a._v("解压")])])]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" zxvf /opt/elasticsearch-7.6.1-linux-x86_64.tar.gz\n")])])]),s("ul",[s("li",[s("strong",[a._v("增加elasticSearch用户")])])]),a._v(" "),s("p",[a._v("必须创建一个非root用户来运行ElasticSearch"),s("Badge",{attrs:{text:"ElasticSearch5及以上版本，基于安全考虑，强制规定不能以root身份运行。",type:"warning"}})],1),a._v(" "),s("p",[a._v("如果你使用root用户来启动ElasticSearch，则会有如下错误信息：")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@VM-0-6-centos elasticsearch-7.6.1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# ./bin/elasticsearch")]),a._v("\nOpenJDK "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("64")]),a._v("-Bit Server VM warning: Option UseConcMarkSweepGC was deprecated "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("in")]),a._v(" version "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("9.0")]),a._v(" and will likely be removed "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("in")]),a._v(" a future release.\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2021")]),a._v("-06-11T17:15:56,884"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("ERROR"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("o.e.b.ElasticsearchUncaughtExceptionHandler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("VM-0-6-centos"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" uncaught exception "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("in")]),a._v(" thread "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("main"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\norg.elasticsearch.bootstrap.StartupException: java.lang.RuntimeException: can not run elasticsearch as root\n\tat org.elasticsearch.bootstrap.Elasticsearch.init"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("Elasticsearch.java:174"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("elasticsearch-7.6.1.jar:7.6.1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n\tat org.elasticsearch.bootstrap.Elasticsearch.execute"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("Elasticsearch.java:161"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("elasticsearch-7.6.1.jar:7.6.1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n\tat org.elasticsearch.cli.EnvironmentAwareCommand.execute"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("EnvironmentAwareCommand.java:86"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("elasticsearch-7.6.1.jar:7.6.1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n\tat org.elasticsearch.cli.Command.mainWithoutErrorHandling"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("Command.java:125"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("elasticsearch-cli-7.6.1.jar:7.6.1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n\tat org.elasticsearch.cli.Command.main"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("Command.java:90"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("elasticsearch-cli-7.6.1.jar:7.6.1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n\tat org.elasticsearch.bootstrap.Elasticsearch.main"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("Elasticsearch.java:126"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("elasticsearch-7.6.1.jar:7.6.1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n\tat org.elasticsearch.bootstrap.Elasticsearch.main"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("Elasticsearch.java:92"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("elasticsearch-7.6.1.jar:7.6.1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\nCaused by: java.lang.RuntimeException: can not run elasticsearch as root\n\tat org.elasticsearch.bootstrap.Bootstrap.initializeNatives"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("Bootstrap.java:105"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("elasticsearch-7.6.1.jar:7.6.1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n\tat org.elasticsearch.bootstrap.Bootstrap.setup"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("Bootstrap.java:172"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("elasticsearch-7.6.1.jar:7.6.1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n\tat org.elasticsearch.bootstrap.Bootstrap.init"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("Bootstrap.java:349"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("elasticsearch-7.6.1.jar:7.6.1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n\tat org.elasticsearch.bootstrap.Elasticsearch.init"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("Elasticsearch.java:170"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("elasticsearch-7.6.1.jar:7.6.1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(". "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("6")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("more")]),a._v("\nuncaught exception "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("in")]),a._v(" thread "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("main"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\njava.lang.RuntimeException: can not run elasticsearch as root\n\tat org.elasticsearch.bootstrap.Bootstrap.initializeNatives"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("Bootstrap.java:105"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\tat org.elasticsearch.bootstrap.Bootstrap.setup"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("Bootstrap.java:172"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\tat org.elasticsearch.bootstrap.Bootstrap.init"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("Bootstrap.java:349"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\tat org.elasticsearch.bootstrap.Elasticsearch.init"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("Elasticsearch.java:170"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\tat org.elasticsearch.bootstrap.Elasticsearch.execute"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("Elasticsearch.java:161"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\tat org.elasticsearch.cli.EnvironmentAwareCommand.execute"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("EnvironmentAwareCommand.java:86"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\tat org.elasticsearch.cli.Command.mainWithoutErrorHandling"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("Command.java:125"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\tat org.elasticsearch.cli.Command.main"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("Command.java:90"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\tat org.elasticsearch.bootstrap.Elasticsearch.main"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("Elasticsearch.java:126"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\tat org.elasticsearch.bootstrap.Elasticsearch.main"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("Elasticsearch.java:92"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\nFor complete error details, refer to the log at /opt/elasticsearch-7.6.1/logs/elasticsearch.log\n")])])]),s("p",[a._v("增加 elasticsearch 用户：")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@VM-0-6-centos elasticsearch-7.6.1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# useradd elasticsearch")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@VM-0-6-centos elasticsearch-7.6.1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# passwd elasticsearch")]),a._v("\nChanging password "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" user elasticsearch.\nNew password: \nBAD PASSWORD: The password contains the user name "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("in")]),a._v(" some form\nRetype new password: \npasswd: all authentication tokens updated successfully.\n")])])]),s("p",[a._v("修改目录权限至新增的 elasticsearch 用户（没权限启动会报错）")]),a._v(" "),s("p",[a._v("在 root 用户下执行命令")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@VM-0-6-centos ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# chown -R elasticsearch /opt/elasticsearch-7.6.1")]),a._v("\n")])])]),s("ul",[s("li",[a._v("启动")])]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#\t切换用户")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("su")]),a._v(" elasticsearch\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#\t启动")]),a._v("\n./bin/elasticsearch "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v("\n")])])]),s("ul",[s("li",[s("strong",[a._v("查看安装是否成功")])])]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@VM-0-6-centos ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# netstat -ntlp | grep 9200")]),a._v("\ntcp6       "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("      "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("127.0")]),a._v(".0.1:9200          :::*                    LISTEN      "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("11601")]),a._v("/java          \ntcp6       "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("      "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" ::1:9200                :::*                    LISTEN      "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("11601")]),a._v("/java          \n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#\t访问成功")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@VM-0-6-centos ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# curl 127.0.0.1:9200")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"name"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"VM-0-6-centos"')]),a._v(",\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"cluster_name"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"elasticsearch"')]),a._v(",\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"cluster_uuid"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"sLGiUbfQQ5-btWB9QiOnxg"')]),a._v(",\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"version"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"number"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"7.6.1"')]),a._v(",\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"build_flavor"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"default"')]),a._v(",\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"build_type"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"tar"')]),a._v(",\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"build_hash"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"aa751e09be0a5072e8570670309b1f12348f023b"')]),a._v(",\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"build_date"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"2020-02-29T00:15:25.529771Z"')]),a._v(",\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"build_snapshot"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" false,\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"lucene_version"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"8.4.0"')]),a._v(",\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"minimum_wire_compatibility_version"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"6.8.0"')]),a._v(",\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"minimum_index_compatibility_version"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"6.0.0-beta1"')]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v(",\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"tagline"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"You Know, for Search"')]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\n")])])]),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"title"},[a._v("安装Kibana")])]),s("p",[a._v("安装 Kibana 及 ElasticSearch 相关配置请访问：https://www.pdai.tech/md/db/nosql-es/elasticsearch-x-install.html")]),a._v(" "),s("h3",{attrs:{id:"使用-docker"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用-docker"}},[a._v("#")]),a._v(" 使用 Docker")]),a._v(" "),s("p",[a._v("官方文档：https://www.elastic.co/guide/en/kibana/current/docker.html")]),a._v(" "),s("p",[a._v("创建网络")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" network create elastic\n")])])]),s("p",[a._v("加上内存限制启动 ES")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" es01-test "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--net")]),a._v(" elastic "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("9200")]),a._v(":9200 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("9300")]),a._v(":9300 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"discovery.type=single-node"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("ES_JAVA_OPTS")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"-Xms64m -Xmx512m"')]),a._v(" elasticsearch:7.6.1\n")])])]),s("p",[a._v("启动 Kibana")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" kib01-test "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--net")]),a._v(" elastic "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("5601")]),a._v(":5601 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"ELASTICSEARCH_HOSTS=http://es01-test:9200"')]),a._v(" kibana:7.6.1\n")])])]),s("p",[a._v("可视化工具 Elasticsearch-head（可选）")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" head-test "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--net")]),a._v(" elastic "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("9100")]),a._v(":9100  mobz/elasticsearch-head:5\n")])])]),s("h2",{attrs:{id:"配置密码访问"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置密码访问"}},[a._v("#")]),a._v(" 配置密码访问")]),a._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"title"},[a._v("修改Elastic配置")])]),s("p",[a._v("使用基本许可证时，默认情况下禁用Elasticsearch安全功能。由于我测试环境是放在公网上的，所以需要设置下密码访问。相关文档可以参考"),s("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/7.12/security-minimal-setup.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("这里"),s("OutboundLink")],1)]),a._v(" "),s("p",[a._v("1、进入正在运行的容器")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-it")]),a._v(" 容器id /bin/bash\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#安装 vim")]),a._v("\nyum "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("vim")]),a._v("\n")])])]),s("p",[a._v("2、更改 "),s("code",[a._v("config/elasticsearch.yml")]),a._v(" 文件，设置 "),s("code",[a._v("xpack.security.enabled")]),a._v(" 为 true")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@06c5914709a5 config"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# vim elasticsearch.yml")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@06c5914709a5 config"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# cat elasticsearch.yml")]),a._v("\ncluster.name: "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"docker-cluster"')]),a._v("\nnetwork.host: "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.0")]),a._v(".0.0\nxpack.security.enabled: "),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),a._v("\n")])])]),s("p",[a._v("3、重启elasticsearch容器")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@VM-0-6-centos z-test"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# docker restart es01-test")]),a._v("\nes01-test\n")])])]),s("p",[a._v("4、进入容器设置各个组件的密码")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@06c5914709a5 elasticsearch"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# ./bin/elasticsearch-setup-passwords interactive")]),a._v("\nInitiating the setup of passwords "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" reserved "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("users")]),a._v(" elastic,apm_system,kibana,logstash_system,beats_system,remote_monitoring_user.\nYou will be prompted to enter passwords as the process progresses.\nPlease confirm that you would like to "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("continue")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("y/N"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("y\n\n\nEnter password "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("elastic"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(": \nReenter password "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("elastic"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(": \nEnter password "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("apm_system"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(": \nReenter password "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("apm_system"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(": \nEnter password "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("kibana"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(": \nReenter password "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("kibana"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(": \nEnter password "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("logstash_system"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(": \nReenter password "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("logstash_system"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(": \nEnter password "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("beats_system"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(": \nReenter password "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("beats_system"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(": \nEnter password "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("remote_monitoring_user"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(": \nReenter password "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("remote_monitoring_user"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(": \nChanged password "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" user "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("apm_system"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\nChanged password "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" user "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("kibana"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\nChanged password "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" user "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("logstash_system"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\nChanged password "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" user "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("beats_system"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\nChanged password "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" user "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("remote_monitoring_user"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\nChanged password "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" user "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("elastic"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"title"},[a._v("修改 Kibana 配置")])]),s("p",[a._v("1、修改 "),s("code",[a._v("kibana.yml")])]),a._v(" "),s("p",[a._v("进入容器")]),a._v(" "),s("p",[a._v("添加配置： "),s("code",[a._v('elasticsearch.username: "elastic"')])]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("bash-4.2$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("vi")]),a._v(" kibana.yml\nbash-4.2$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cat")]),a._v(" kibana.yml\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# ** THIS IS AN AUTO-GENERATED FILE **")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Default Kibana configuration for docker target")]),a._v("\nserver.name: kibana\nserver.host: "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"0"')]),a._v("\nelasticsearch.hosts: "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"http://elasticsearch:9200"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\nxpack.monitoring.ui.container.elasticsearch.enabled: "),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),a._v("\nelasticsearch.username: "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"elastic"')]),a._v("\n")])])]),s("p",[a._v("2、创建kibana keystore")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("./bin/kibana-keystore create\n")])])]),s("p",[a._v("3、在kibana keystore 中添加密码")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("./bin/kibana-keystore "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" elasticsearch.password\n")])])]),s("p",[a._v("4、重启容器")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("root@VM-0-6-centos /"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# docker restart kib01-test")]),a._v("\nkib01-test\n")])])]),s("p",[a._v("再次访问："),s("code",[a._v("ip:9200")]),a._v("，则需要输入账号和密码")]),a._v(" "),s("p",[a._v("账号为：elastic")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/oddfar/static/img/ElasticSearch/image-20210613152724020.png",alt:"image-20210613152724020"}})])])}),[],!1,null,null,null);s.default=e.exports}}]);