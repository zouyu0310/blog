(window.webpackJsonp=window.webpackJsonp||[]).push([[138],{730:function(t,n,e){"use strict";e.r(n);var a=e(14),r=Object(a.a)({},(function(){var t=this,n=t._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h2",{attrs:{id:"新版公众号部署文档"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#新版公众号部署文档"}},[t._v("#")]),t._v(" 新版公众号部署文档")]),t._v(" "),n("h3",{attrs:{id:"文件准备"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#文件准备"}},[t._v("#")]),t._v(" 文件准备")]),t._v(" "),n("p",[t._v("pro1服务器的/usr/local/nginx/html路径 yezhuxiaochengxu文件夹下载并上传客户服务器")]),t._v(" "),n("h3",{attrs:{id:"nginx配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginx配置"}},[t._v("#")]),t._v(" nginx配置")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('\nserver {\n# 监听外部端口\nlisten 80;\n# 监听域名 \nserver_name   XXXXX.com;\n\n\t\n\t#新版 小程序版 公众号接口获取地址\n\tlocation /yezhuxiaochengxujiekou/apiBase/api {\n        proxy_pass http://20.89892528.cn:8889/api; # 此处需要修改地址\n    }\n\t#新版 小程序版 公众号上传图片接口获取地址\n\tlocation /yezhuxiaochengxujiekou/apiBase {\n        proxy_pass http://20.89892528.cn:8889; # 此处需要修改地址\n    }\n\t\n\t\n\t#新版 小程序版 公众号上传图片接口获取地址\n\tlocation /yezhuxiaochengxujiekou/apiBase/uni-app {\n        proxy_pass http://20.89892528.cn:8889/uni-app; # 此处需要修改地址\n    }\n\n\n\tlocation ~ (.+?export) {\n\t\t# 本地程序地址\n\t\tproxy_pass   http://127.0.0.1:8888;\n\t\t#proxy_pass   http://saas-servers2;\n\t\t# 响应超时时间\n\t\tproxy_read_timeout  3600;\n\t\t# 超时时间\n\t\tfastcgi_connect_timeout 300;  \n\t\tfastcgi_send_timeout  300;  \n\t\tfastcgi_read_timeout  300; \n\t\tfastcgi_buffers 8  16k;\n\t\tfastcgi_buffer_size  32k;\n\t\tproxy_set_header  X-Real-IP  $remote_addr;\n\t\tproxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n\t\tproxy_redirect off;\n\t\tproxy_set_header Host $host;\n\t\tproxy_set_header X-Real-IP       $remote_addr;\n\t\tproxy_set_header X-Forwarded-For  $proxy_add_x_forwarded_for;\n\t\tclient_max_body_size  100M;\t\n\t\t# websocket support\n\t\tproxy_http_version 1.1;\n\t\tproxy_set_header Upgrade $http_upgrade;\n\t\tproxy_set_header Connection "upgrade";\n\t\tlimit_rate 200k;\n\t}\n\n\t# 微信路径\n\tlocation  ~* \\.(txt)$  {\n\troot   /data/wechat/;\n\t}\n\n\t\t\n\t# 默认访问路径 /\n\tlocation / {\n\t\t# 本地程序地址\n\t\tproxy_pass   http://127.0.0.1:8888/;\n\t\t#proxy_pass   http://saas-servers2;\n\t\t# 响应超时时间\n\t\tproxy_read_timeout  3600;\n\t\t# 超时时间\n\t\tfastcgi_connect_timeout 300;  \n\t\tfastcgi_send_timeout  300;  \n\t\tfastcgi_read_timeout  300; \n\t\tfastcgi_buffers 8  16k;\n\t\tfastcgi_buffer_size  32k;\n\t\tproxy_set_header  X-Real-IP  $remote_addr;\n\t\tproxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n\t\tproxy_redirect off;\n\t\tproxy_set_header Host $host;\n\t\tproxy_set_header X-Real-IP       $remote_addr;\n\t\tproxy_set_header X-Forwarded-For  $proxy_add_x_forwarded_for;\n\t\tclient_max_body_size  100M;\t\n\t\t# websocket support\n\t\tproxy_http_version 1.1;\n\t\tproxy_set_header Upgrade $http_upgrade;\n\t\tproxy_set_header Connection "upgrade";\n\t}\n\n\n\tlocation ^~/hot-area {\n\t\talias   html/hot-area;\n\t\ttry_files $uri $uri/ /hot-area/index.html;\n\t\tindex index.html;\n\t}\n\t\n\tlocation ^~/hot-areanew {\n            alias   html/hot-areanew;\n            try_files $uri $uri/ /hot-areanew/index.html;\n            index index.html;\n    }\n\t\t\n\tlocation ^~/geecityoa {\n\t\talias   html/geecityoa;\n\t\ttry_files $uri $uri/ /geecityoa/index.html;\n\t\tindex index.html;\n\t}\n\t\tlocation ^~  /cockpitnew {\n\t\n\t\t alias   html/cockpitnew;\n\t\t\ttry_files $uri $uri/ /cockpitnew/index.html;\n\t\t\tindex index.html;\n        }\n\t\t\n\t#表单页面\n\tlocation ^~/geecityform {\n\t\t#nginx文件夹下的目录\n\t\talias html/geecityform;\n\t\t#入口页面配置\n\t\ttry_files $uri $uri/ /geecityform/index.html;\n\t\tindex index.html;\n\t}\n\t\n\t#VForm新表单\n\tlocation  ~* /geecityNewForm {\n\t\t   root html;\n\t\t  \n\t\t   try_files $uri $uri/ /geecitynewform/index.html;\n\t\t   \n\t\t   index index.html index.htm;\n\t\n    }\n\t# 驾驶舱前端页面\n    location ^~/cockpit {\n\t\talias   html/cockpit;\n\t\t#index  index.html index.htm break;\n\t\ttry_files $uri $uri/ /cockpit/index.html;\n\t\tindex index.html;\n    }\n\n    # 驾驶舱接口\n    location ^~/kanbanApi {\n\t\trewrite ^/kanbanApi/(.*) /$1 break;  \n\t\tproxy_pass   http://qhwhwy.qhwhwy.com/spectaculars/;\n    }\n\t\n\n\t\n\t# 新版 小程序版公众号页面\n    location ^~/yezhuxiaochengxu {\n\t\talias   html/yezhuxiaochengxu;\n\t\t#index  index.html index.htm break;\n\t\ttry_files $uri $uri/ /yezhuxiaochengxu/index.html;\n\t\tindex index.html;\n    }\n\t\t# 商城协议相关\n    location ^~/mallAgreement {\n\t\talias   html/mallAgreement;\n\t\t#index  index.html index.htm break;\n\t\ttry_files $uri $uri/ /mallAgreement/index.html;\n\t\tindex index.html;\n    }\n\t\n\n}\n')])])]),n("h3",{attrs:{id:"上传接口程序到服务器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#上传接口程序到服务器"}},[t._v("#")]),t._v(" 上传接口程序到服务器")]),t._v(" "),n("h3",{attrs:{id:"修改nginx配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#修改nginx配置"}},[t._v("#")]),t._v(" 修改nginx配置")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("location /yezhuxiaochengxujiekou\n开头的 proxy_pass 都需要改为对应接口地址\n")])])]),n("h3",{attrs:{id:""}},[n("a",{staticClass:"header-anchor",attrs:{href:"#"}},[t._v("#")])])])}),[],!1,null,null,null);n.default=r.exports}}]);