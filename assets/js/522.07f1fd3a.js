(window.webpackJsonp=window.webpackJsonp||[]).push([[522],{1199:function(t,s,a){"use strict";a.r(s);var e=a(14),r=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"主从缩容案例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#主从缩容案例"}},[t._v("#")]),t._v(" 主从缩容案例")]),t._v(" "),s("h3",{attrs:{id:"目的-6387和6388下线"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#目的-6387和6388下线"}},[t._v("#")]),t._v(" 目的：6387和6388下线")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("检查集群情况第一次，先获得从节点6388的节点ID")]),t._v(" "),s("p",[t._v("redis-cli -a 123456 --cluster check 192.168.111.174:6388")])])]),t._v(" "),s("p",[s("img",{attrs:{src:"images/41.png",alt:""}})]),t._v(" "),s("ul",[s("li",[s("p",[t._v("从集群中将4号结点6388删除")]),t._v(" "),s("p",[t._v("redis-cli -a 123456 --cluster del-node 192.168.111.174:6388 218e7b8b4f81be54ff173e4776b4f4faaf7c13da")]),t._v(" "),s("p",[s("img",{attrs:{src:"images/42.png",alt:""}})])]),t._v(" "),s("li",[s("p",[t._v("将6387的槽号清空，重新分配，本例将清出来的槽号都给6381")]),t._v(" "),s("p",[t._v("redis-cli -a 123456 --cluster reshard 192.168.111.175:6381")]),t._v(" "),s("p",[s("img",{attrs:{src:"images/43.png",alt:""}})]),t._v(" "),s("p",[s("img",{attrs:{src:"images/44.png",alt:""}})])]),t._v(" "),s("li",[s("p",[t._v("检查集群情况第二次")]),t._v(" "),s("p",[t._v("redis-cli -a 123456 --cluster check 192.168.111.175:6381")]),t._v(" "),s("p",[t._v("4096个槽位都指给6381，它变成了8192个槽位，相当于全部都给6381了，不然要输入三次 Source node")]),t._v(" "),s("p",[s("img",{attrs:{src:"images/45.png",alt:""}})])]),t._v(" "),s("li",[s("p",[t._v("将6387删除")]),t._v(" "),s("p",[t._v("redis-cli -a 123456 --cluster del-node 192.168.111.174:6387 307a5f6617a6eeb4949f3cb9124ed04c6962c348")]),t._v(" "),s("p",[s("img",{attrs:{src:"images/46.png",alt:""}})])]),t._v(" "),s("li",[s("p",[t._v("检查集群情况第三次 6387/6388被彻底删除")]),t._v(" "),s("p",[t._v("redis-cli -a 123456 --cluster check 192.168.111.174:6381")]),t._v(" "),s("p",[s("img",{attrs:{src:"images/47.png",alt:""}})])])])])}),[],!1,null,null,null);s.default=r.exports}}]);