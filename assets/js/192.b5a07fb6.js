(window.webpackJsonp=window.webpackJsonp||[]).push([[192],{798:function(a,s,t){"use strict";t.r(s);var e=t(14),n=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h2",{attrs:{id:"将应用打包成镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#将应用打包成镜像"}},[a._v("#")]),a._v(" 将应用打包成镜像")]),a._v(" "),s("p",[a._v("编写Dockerfile将自己的应用打包镜像")]),a._v(" "),s("h3",{attrs:{id:"_1、以前"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、以前"}},[a._v("#")]),a._v(" 1、以前")]),a._v(" "),s("p",[a._v("Java为例")]),a._v(" "),s("ul",[s("li",[s("p",[a._v("SpringBoot打包成可执行jar")])]),a._v(" "),s("li",[s("p",[a._v("把jar包上传给服务")])]),a._v(" "),s("li",[s("p",[a._v("服务器运行java -jar")])])]),a._v(" "),s("h3",{attrs:{id:"_2、现在"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、现在"}},[a._v("#")]),a._v(" 2、现在")]),a._v(" "),s("p",[a._v("所有机器都安装Docker，任何应用都是镜像，所有机器都可以运行")]),a._v(" "),s("h3",{attrs:{id:"_3、怎么打包-dockerfile"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、怎么打包-dockerfile"}},[a._v("#")]),a._v(" 3、怎么打包-Dockerfile")]),a._v(" "),s("p",[a._v("-Dockerfile就是告诉linux怎么制作镜像")]),a._v(" "),s("p",[a._v("找openjdk")]),a._v(" "),s("p",[a._v("maintainer  这个镜像作者")]),a._v(" "),s("p",[a._v("copy  target目录下任意jar包  复制到linux系统下路径。")]),a._v(" "),s("p",[a._v("ENTRYPOINT  镜像启动命令")]),a._v(" "),s("div",{staticClass:"language-dockerfile extra-class"},[s("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[s("code",[s("span",{pre:!0,attrs:{class:"token instruction"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("FROM")]),a._v(" openjdk:8-jdk-slim")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token instruction"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("LABEL")]),a._v(" maintainer=leifengyang")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token instruction"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("COPY")]),a._v(" target/*.jar   /app.jar")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token instruction"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("ENTRYPOINT")]),a._v(" ["),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"java"')]),a._v(","),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"-jar"')]),a._v(","),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/app.jar"')]),a._v("]")]),a._v("\n")])])]),s("p",[a._v("注意：打包如果是war包")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('FROM openjdk:8-jdk-slim\nLABEL maintainer=leifengyang\n\nCOPY target/*.war   /app.war\n\nENTRYPOINT ["java","-jar","/app.war"]\n')])])]),s("p",[a._v("复制到系统里的")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("docker build -t java-demo:v1.0 .\n")])])]),s("p",[a._v("java-demo:v1.0后可以加 -f 指定哪一个Dockerfile")]),a._v(" "),s("p",[a._v("-t 起一个镜像名+版本  后面一个点 表示在当前目录下工作")]),a._v(" "),s("p",[a._v("3、启动容器")]),a._v(" "),s("p",[a._v("启动应用容器")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("docker run -d -p 8080:8080 --name myjava-app java-demo:v1.0 \n")])])]),s("p",[s("img",{attrs:{src:"https://gitee.com/zouyu0310/images/raw/master/img/20210929233337.png",alt:"image-20210929233330447"}})]),a._v(" "),s("p",[a._v("分享镜像")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("# 登录docker hub\ndocker login\n\n#给旧镜像起名\ndocker tag java-demo:v1.0  leifengyang/java-demo:v1.0\n\n# 推送到docker hub\ndocker push leifengyang/java-demo:v1.0\n\n# 在别的机器上拉 镜像名+版本\ndocker pull leifengyang/java-demo:v1.0\n\n# 别的机器运行\ndocker run -d -p 8080:8080 --name myjava-app java-demo:v1.0 \n")])])]),s("h2",{attrs:{id:"部署中间件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#部署中间件"}},[a._v("#")]),a._v(" 部署中间件")]),a._v(" "),s("p",[a._v("部署一个Redis+应用，尝试应用操作Redis产生数据")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("docker run [OPTIONS] IMAGE [COMMAND] [ARG...]\n\n#redis使用自定义配置文件启动\n\ndocker run -v /data/redis/redis.conf:/etc/redis/redis.conf \\\n-v /data/redis/data:/data \\\n-d --name myredis \\\n-p 6379:6379 \\\nredis:latest  redis-server /etc/redis/redis.conf\n\n")])])]),s("h1",{attrs:{id:"docker安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker安装"}},[a._v("#")]),a._v(" docker安装")]),a._v(" "),s("h1",{attrs:{id:"安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[a._v("#")]),a._v(" 安装")]),a._v(" "),s("h2",{attrs:{id:"_1、centos下安装docker"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、centos下安装docker"}},[a._v("#")]),a._v(" 1、centos下安装docker")]),a._v(" "),s("p",[a._v("其他系统参照如下文档")]),a._v(" "),s("p",[a._v("https://docs.docker.com/engine/install/centos/")]),a._v(" "),s("h3",{attrs:{id:"_1、移除以前docker相关包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、移除以前docker相关包"}},[a._v("#")]),a._v(" 1、移除以前docker相关包")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("yum remove "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" *\n")])])]),s("h3",{attrs:{id:"_2、配置yum源"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、配置yum源"}},[a._v("#")]),a._v(" 2、配置yum源")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" yum "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v(" yum-utils\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" yum-config-manager "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--add-repo "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\nhttp://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n")])])]),s("p",[a._v("注:sudo是使用管理员权限")]),a._v(" "),s("p",[a._v("正式:")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("yum install -y yum-utils\n\nyum-config-manager \\\n--add-repo \\\nhttp://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n")])])]),s("h3",{attrs:{id:"_3、安装docker"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、安装docker"}},[a._v("#")]),a._v(" 3、安装docker")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("yum "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v(" docker-ce docker-ce-cli containerd.io\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 注意:默认下最新版本 如果指定版本在ce后指定")]),a._v("\nyum "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v(" docker-ce-19.0.3 docker-ce-cli containerd.io\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#以下是在安装k8s的时候使用")]),a._v("\nyum "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v(" docker-ce-20.10.7 docker-ce-cli-20.10.7  containerd.io-1.4.6\n")])])]),s("p",[a._v("会安装三个东西")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("docker-ce  docker社区版-docker服务器\ndocker-ce-cli  docker命令行程序\ncontainerd.io  容器环境\n")])])]),s("h3",{attrs:{id:"_4、启动"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4、启动"}},[a._v("#")]),a._v(" 4、启动")]),a._v(" "),s("p",[a._v("开机启动并立即启动")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("systemctl "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("enable")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--now")]),a._v("\n")])])]),s("h3",{attrs:{id:"_5、配置加速"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5、配置加速"}},[a._v("#")]),a._v(" 5、配置加速")]),a._v(" "),s("p",[a._v("这里额外添加了docker的生产环境核心配置cgroup")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" /etc/docker\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("tee")]),a._v(" /etc/docker/daemon.json "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<<-")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('\'EOF\'\n{\n  "registry-mirrors": ["https://82m9ar63.mirror.aliyuncs.com"],\n  "exec-opts": ["native.cgroupdriver=systemd"],\n  "log-driver": "json-file",\n  "log-opts": {\n    "max-size": "100m"\n  },\n  "storage-driver": "overlay2"\n}\nEOF')]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" systemctl daemon-reload\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" systemctl restart "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v("\n")])])]),s("p",[a._v("注:")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('["https://82m9ar63.mirror.aliyuncs.com"],  为加速器地址可以使用自己的阿里云的免费加速器\n')])])]),s("p",[a._v("阿里云-产品服务--容器镜像服务--镜像工作-(加速器)")]),a._v(" "),s("p",[a._v("解析:")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('sudo mkdir -p /etc/docker # 先创建文件夹/etc/docker \nsudo tee /etc/docker/daemon.json <<-\'EOF\' #核心配置\n{\n  "registry-mirrors": ["https://82m9ar63.mirror.aliyuncs.com"],\n  "exec-opts": ["native.cgroupdriver=systemd"],\n  "log-driver": "json-file",\n  "log-opts": {\n    "max-size": "100m"\n  },\n  "storage-driver": "overlay2"\n}\nEOF\nsudo systemctl daemon-reload  #后台重启\nsudo systemctl restart docker #docker重启\n')])])]),s("h1",{attrs:{id:"docker命令实战"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker命令实战"}},[a._v("#")]),a._v(" Docker命令实战")]),a._v(" "),s("h1",{attrs:{id:"常用命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#常用命令"}},[a._v("#")]),a._v(" 常用命令")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://gitee.com/zouyu0310/images/raw/master/img/20210930125733.png",alt:"image-20210930125733055"}})]),a._v(" "),s("h1",{attrs:{id:"基础实战"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基础实战"}},[a._v("#")]),a._v(" 基础实战")]),a._v(" "),s("h2",{attrs:{id:"_1、找镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、找镜像"}},[a._v("#")]),a._v(" 1、找镜像")]),a._v(" "),s("p",[a._v("去"),s("a",{attrs:{href:"http://hub.docker.com",target:"_blank",rel:"noopener noreferrer"}},[a._v("docker hub"),s("OutboundLink")],1),a._v("，找到nginx镜像")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" pull nginx  "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#下载最新版")]),a._v("\n\n镜像名:版本名（标签）\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#下载指定版本")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" pull nginx:1.20.1\n\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" pull redis  "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#下载最新")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" pull redis:6.2.4\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 下载来的镜像都在本地")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" images  "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#查看所有镜像")]),a._v("\n\n\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 删除镜像")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" rmi 镜像名:版本号/镜像id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("更具有唯一性"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\nredis "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" redis:latest\n注: latest为最新版本\n\n如: "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" rmi nginx:1.20.1\n")])])]),s("p",[s("img",{attrs:{src:"https://gitee.com/zouyu0310/images/raw/master/img/20210930131020.png",alt:"image-20210930131020570"}})]),a._v(" "),s("h2",{attrs:{id:"_2、启动容器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、启动容器"}},[a._v("#")]),a._v(" 2、启动容器")]),a._v(" "),s("p",[a._v("启动nginx应用容器，并映射88端口，测试的访问")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("OPTIONS"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" IMAGE "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("COMMAND"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("ARG"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n\n【docker run  设置项   镜像名  】 镜像启动运行的命令（镜像里面默认有的，一般不会写）\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# -d：后台运行")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# --restart=always: 开机自启")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("mynginx   "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v("  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--restart")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("always "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v("  "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("88")]),a._v(":80   nginx\n\n\n\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看正在运行的容器")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看所有")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-a")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 删除停止的容器")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v("  容器id/名字\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v("  容器id/名字  "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#强制删除正在运行中的")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#停止容器")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" stop 容器id/名字\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#再次启动")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" start 容器id/名字\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#应用开机自启(修改  update )")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" update 容器id/名字 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--restart")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("always\n")])])]),s("h2",{attrs:{id:"_3、修改容器内容"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、修改容器内容"}},[a._v("#")]),a._v(" 3、修改容器内容")]),a._v(" "),s("p",[a._v("修改默认的index.html 页面")]),a._v(" "),s("h3",{attrs:{id:"_1、进容器内部修改"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、进容器内部修改"}},[a._v("#")]),a._v(" 1、进容器内部修改")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 进入容器内部的系统，修改容器内容")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-it")]),a._v(" 容器id  /bin/bash\n\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# -it 为交互模式")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# bash 控制台")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 退出")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exit")]),a._v("\n")])])]),s("p",[a._v("已经进入")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://gitee.com/zouyu0310/images/raw/master/img/20210930132919.png",alt:"image-20210930132919349"}})]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("# 查看内部 ls /\n")])])]),s("p",[s("img",{attrs:{src:"https://gitee.com/zouyu0310/images/raw/master/img/20210930133131.png",alt:"image-20210930133131824"}})]),a._v(" "),s("p",[a._v("注意: 以上内部的镜像内容从docker hub的容器描述查看")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("https://hub.docker.com/_/nginx?tab=description&page=1&ordering=last_updated\n")])])]),s("h3",{attrs:{id:"_2、挂载数据到外部修改"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、挂载数据到外部修改"}},[a._v("#")]),a._v(" 2、挂载数据到外部修改")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("mynginx   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v("  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--restart")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("always "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v("  "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("88")]),a._v(":80 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /data/html:/usr/share/nginx/html:ro  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\nnginx\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 修改页面只需要去 主机的 /data/html")]),a._v("\n")])])]),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("mynginx "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--restart")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("always "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("88")]),a._v(":80 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /data/html:/usr/share/nginx/html:ro   nginx\n\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# -v挂载 主机地址:容器地址")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 注意: 如果/data/html主机文件为空,那容器中文件也是空")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 一定保证外部文件在,才可以挂载")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 默认容器对这个目录有可读写权限，可以通过指定ro，将权限改为只读（readonly）")]),a._v("\n")])])]),s("h2",{attrs:{id:"_4、提交改变"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4、提交改变"}},[a._v("#")]),a._v(" 4、提交改变")]),a._v(" "),s("p",[a._v("将自己修改好的镜像提交")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" commit "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("OPTIONS"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" CONTAINER "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("REPOSITORY"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(":TAG"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" commit "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-a")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"zouyu"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-m")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"shouye nihao"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("26")]),a._v("  zouyunginx:v1.0\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#docker commit -a 作者  -m 提交内容 容器id 镜像名:版本")]),a._v("\n\n")])])]),s("p",[a._v("注: 其他配置参数可以参考 docker commit --help")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://gitee.com/zouyu0310/images/raw/master/img/20210930140132.png",alt:"image-20210930140132239"}})]),a._v(" "),s("p",[a._v("可以直接运行提交修改好的镜像，名字后面带版本 如果不带会报最新版本错误")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v(" docker run --name=zouyunihao -d -p 88:80 zouyunginx:v1.0\n")])])]),s("p",[a._v("复习:")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("docker ps -a  # docker全部容器\ndocker ps  # docker正在运行容器\n")])])]),s("h3",{attrs:{id:"_1、镜像传输"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、镜像传输"}},[a._v("#")]),a._v(" 1、镜像传输")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 将镜像保存成压缩包-- 真正的文件")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" save "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-o")]),a._v(" abc.tar guignginx:v1.0\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 别的机器加载这个镜像")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" load "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" abc.tar\n\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 离线安装")]),a._v("\n")])])]),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("[root@192 ~]# docker save --help\n\nUsage:  docker save [OPTIONS] IMAGE [IMAGE...]\n\nSave one or more images to a tar archive (streamed to STDOUT by default)\n\nOptions:\n  -o, --output string   Write to a file, instead of STDOUT\n")])])]),s("h2",{attrs:{id:"_5、推送远程仓库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5、推送远程仓库"}},[a._v("#")]),a._v(" 5、推送远程仓库")]),a._v(" "),s("p",[a._v("推送镜像到docker hub；应用市场")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" tag local-image:tagname new-repo:tagname\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" push new-repo:tagname\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 把旧镜像的名字，改成仓库要求的新版名字")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" tag guignginx:v1.0 leifengyang/guignginx:v1.0\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 登录到docker hub")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" login       \n\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" logout（推送完成镜像后退出）\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 推送")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" push leifengyang/guignginx:v1.0\n\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 别的机器下载")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" pull leifengyang/guignginx:v1.0\n")])])]),s("h2",{attrs:{id:"_6、补充"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6、补充"}},[a._v("#")]),a._v(" 6、补充")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看日志")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" logs 容器名/id   排错\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 进入容器")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-it")]),a._v(" 容器id /bin/bash\n\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# docker 经常修改nginx配置文件")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("80")]),a._v(":80 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /data/html:/usr/share/nginx/html:ro "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /data/conf/nginx.conf:/etc/nginx/nginx.conf "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" mynginx-02 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\nnginx\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#例子:")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("87")]),a._v(":80 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /data/html:/usr/share/nginx/html:ro "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /data/conf/nginx.conf:/etc/nginx/nginx.conf "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" mynginx-02 nginx\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 此时启动会报错,主机nginx.conf下不存在配置, nginx.conf为文件夹")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#把运行正常的容器指定位置的东西复制出来 ")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" 5eff66eec7e1:/etc/nginx/nginx.conf  /data/conf/nginx.conf\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#反向写:  也可以把外面的内容复制到容器里面")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v("  /data/conf/nginx.conf  5eff66eec7e1:/etc/nginx/nginx.conf\n")])])]),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("# 注意:如果之前启动失败的容器也会存在,只是没运行罢了 记得删除\n")])])]),s("h1",{attrs:{id:"进阶实战"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#进阶实战"}},[a._v("#")]),a._v(" 进阶实战")]),a._v(" "),s("p",[a._v("小结： 之前的操作：")]),a._v(" "),s("p",[a._v("docker hub下载镜像，下载完成后run--容器")]),a._v(" "),s("h2",{attrs:{id:"_1、编写自己的应用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、编写自己的应用"}},[a._v("#")]),a._v(" 1、编写自己的应用")]),a._v(" "),s("p",[a._v("编写一个HelloWorld应用")]),a._v(" "),s("p",[a._v("https://start.spring.io/")]),a._v(" "),s("p",[a._v("示例代码：  https://gitee.com/leifengyang/java-demo.git")]),a._v(" "),s("h2",{attrs:{id:"_2、将应用打包成镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、将应用打包成镜像"}},[a._v("#")]),a._v(" 2、将应用打包成镜像")]),a._v(" "),s("p",[a._v("编写Dockerfile将自己的应用打包镜像")]),a._v(" "),s("h3",{attrs:{id:"_1、以前-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、以前-2"}},[a._v("#")]),a._v(" 1、以前")]),a._v(" "),s("p",[a._v("Java为例")]),a._v(" "),s("ul",[s("li",[s("p",[a._v("SpringBoot打包成可执行jar")])]),a._v(" "),s("li",[s("p",[a._v("把jar包上传给服务")])]),a._v(" "),s("li",[s("p",[a._v("服务器运行java -jar")])])]),a._v(" "),s("h3",{attrs:{id:"_2、现在-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、现在-2"}},[a._v("#")]),a._v(" 2、现在")]),a._v(" "),s("p",[a._v("所有机器都安装Docker，任何应用都是镜像，所有机器都可以运行")]),a._v(" "),s("h3",{attrs:{id:"_3、怎么打包-dockerfile-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、怎么打包-dockerfile-2"}},[a._v("#")]),a._v(" 3、怎么打包-Dockerfile")]),a._v(" "),s("div",{staticClass:"language-dockerfile extra-class"},[s("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[s("code",[s("span",{pre:!0,attrs:{class:"token instruction"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("FROM")]),a._v(" openjdk:8-jdk-slim")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token instruction"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("LABEL")]),a._v(" maintainer=leifengyang")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token instruction"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("COPY")]),a._v(" target/*.jar   /app.jar")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token instruction"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("ENTRYPOINT")]),a._v(" ["),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"java"')]),a._v(","),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"-jar"')]),a._v(","),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/app.jar"')]),a._v("]")]),a._v("\n")])])]),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" build "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-t")]),a._v(" java-demo:v1.0 "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(".")]),a._v("\n")])])]),s("p",[a._v("思考：")]),a._v(" "),s("p",[a._v("每个应用每次打包，都需要本地编译、再上传服务器、再进行docker构建，如果有1000个应用要打包镜像怎么办？有没有更好的方式？")]),a._v(" "),s("h2",{attrs:{id:"_3、启动容器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、启动容器"}},[a._v("#")]),a._v(" 3、启动容器")]),a._v(" "),s("p",[a._v("启动应用容器")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("8080")]),a._v(":8080 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" myjava-app java-demo:v1.0 \n")])])]),s("p",[a._v("分享镜像")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 登录docker hub")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" login\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#给旧镜像起名")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" tag java-demo:v1.0  leifengyang/java-demo:v1.0\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 推送到docker hub")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" push leifengyang/java-demo:v1.0\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 别的机器")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" pull leifengyang/java-demo:v1.0\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 别的机器运行")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("8080")]),a._v(":8080 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" myjava-app java-demo:v1.0 \n")])])]),s("h2",{attrs:{id:"_4、部署中间件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4、部署中间件"}},[a._v("#")]),a._v(" 4、部署中间件")]),a._v(" "),s("p",[a._v("部署一个Redis+应用，尝试应用操作Redis产生数据")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("OPTIONS"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" IMAGE "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("COMMAND"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("ARG"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#redis使用自定义配置文件启动")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /data/redis/redis.conf:/etc/redis/redis.conf "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /data/redis/data:/data "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" myredis "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("6379")]),a._v(":6379 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\nredis:latest  redis-server /etc/redis/redis.conf\n")])])])])}),[],!1,null,null,null);s.default=n.exports}}]);