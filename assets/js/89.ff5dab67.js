(window.webpackJsonp=window.webpackJsonp||[]).push([[89],{1086:function(n,t,s){"use strict";s.r(t);var a=s(14),e=Object(a.a)({},(function(){var n=this,t=n._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[t("p",[n._v("46_OpenFeign日志增强")]),n._v(" "),t("p",[n._v("日志打印功能")]),n._v(" "),t("p",[n._v("Feign提供了日志打印功能，我们可以通过配置来调整日恙级别，从而了解Feign 中 Http请求的细节。")]),n._v(" "),t("p",[n._v("说白了就是对Feign接口的调用情况进行监控和输出")]),n._v(" "),t("p",[n._v("日志级别")]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[n._v("NONE：默认的，不显示任何日志;\nBASIC：仅记录请求方法、URL、响应状态码及执行时间;\nHEADERS：除了BASIC中定义的信息之外，还有请求和响应的头信息;\nFULL：除了HEADERS中定义的信息之外，还有请求和响应的正文及元数据。\n")])])]),t("p",[n._v("配置日志bean")]),n._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("package")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token namespace"}},[n._v("com"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),n._v("springcloud"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),n._v("config")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("import")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token import"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[n._v("feign"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")])]),t("span",{pre:!0,attrs:{class:"token class-name"}},[n._v("Logger")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("import")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token import"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[n._v("org"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),n._v("springframework"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),n._v("context"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),n._v("annotation"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")])]),t("span",{pre:!0,attrs:{class:"token class-name"}},[n._v("Bean")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("import")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token import"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[n._v("org"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),n._v("springframework"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),n._v("context"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),n._v("annotation"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")])]),t("span",{pre:!0,attrs:{class:"token class-name"}},[n._v("Configuration")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n\n\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("/**\n * @ClassName FeignConfig\n * @Description FeignConfig配置日志bean\n * @Author zouyu\n * @Date 2021/12/27 0:48\n * @Version 1.0\n **/")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[n._v("@Configuration")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("public")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("class")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[n._v("FeignConfig")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[n._v("@Bean")]),n._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[n._v("Logger"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),n._v("Level")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("feignLoggerLevel")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),n._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("//详细日志")]),n._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("return")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[n._v("Logger"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),n._v("Level")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[n._v("FULL")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("/*\n    NONE：默认的，不显示任何日志;\n    BASIC：仅记录请求方法、URL、响应状态码及执行时间;\n    HEADERS：除了BASIC中定义的信息之外，还有请求和响应的头信息;\n    FULL：除了HEADERS中定义的信息之外，还有请求和响应的正文及元数据。\n     */")]),n._v("\n\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n\n")])])]),t("p",[t("strong",[n._v("YML文件里需要开启日志的Feign客户端")])]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("logging:\n  level:\n    # feign日志以什么级别监控哪个接口\n    com.lun.springcloud.service.PaymentFeignService: debug\n")])])]),t("p",[t("strong",[n._v("后台日志查看")])]),n._v(" "),t("p",[n._v("得到更多日志信息。")]),n._v(" "),t("p",[t("img",{attrs:{src:s(570),alt:"image-20211227005448185"}})])])}),[],!1,null,null,null);t.default=e.exports},570:function(n,t,s){n.exports=s.p+"assets/img/20211227005448.47b2d554.png"}}]);