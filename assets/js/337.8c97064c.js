(window.webpackJsonp=window.webpackJsonp||[]).push([[337],{966:function(t,a,e){"use strict";e.r(a);var s=e(14),l=Object(s.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"一、如何对注入的属性进行校验"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、如何对注入的属性进行校验"}},[t._v("#")]),t._v(" 一、如何对注入的属性进行校验")]),t._v(" "),a("p",[t._v("比如：我们希望family里面爸爸的年龄不能小于21岁，小于21就是不合理的配置。")]),t._v(" "),a("p",[t._v("在需要校验的属性装配类上加@Validated注解")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Data")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Validated")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ConfigurationProperties")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("prefix "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"family"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Family")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n")])])]),a("p",[t._v("在需要校验的属性装配类上加@Validated注解,只有加上才会触发数据校验\n@Validated注解的在此处的作用是配合@ConfigurationProperties进行属性校验。")]),t._v(" "),a("h1",{attrs:{id:"二、数据校验注解列表-部分常用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、数据校验注解列表-部分常用"}},[t._v("#")]),t._v(" 二、数据校验注解列表（部分常用）")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v("限制")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("@Null")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("限制只能为null")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("@NotNull")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("限制必须不为null")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("@AssertFalse")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("限制必须为false")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("@AssertTrue")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("限制必须为true")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("@DecimalMax(value)")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("限制必须为一个不大于指定值的数字")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("@DecimalMin(value)")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("限制必须为一个不小于指定值的数字")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("@Digits(integer,fraction)")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("限制必须为一个小数，且整数部分的位数不能超过integer，小数部分的位数不能超过fraction")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("@Future")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("限制必须是一个将来的日期")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("@Max(value)")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("限制必须为一个不大于指定值的数字")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("@Min(value)")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("限制必须为一个不小于指定值的数字")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("@Past")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("限制必须是一个过去的日期")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("@Pattern(value)")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("限制必须符合指定的正则表达式")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("@Size(max,min)")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("限制字符长度必须在min到max之间")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("@Past")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("验证注解的元素值（日期类型）比当前时间早")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("@NotEmpty")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("验证注解的元素值不为null且不为空（字符串长度不为0、集合大小不为0）")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("@NotBlank")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("验证注解的元素值不为空（不为null、去除首位空格后长度为0），不同于@NotEmpty，@NotBlank只应用于字符串且在比较时会去除字符串的空格")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("@Email")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("验证注解的元素值是Email，也可以通过正则表达式和flag指定自定义的email格式")])])])]),t._v(" "),a("ul",[a("li",[t._v("校验familyName，必须不能为空")])]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@NotEmpty")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" familyName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("ul",[a("li",[t._v("校验父亲的年龄，必须大于21岁")])]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Father")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Min")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("21")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Integer")]),t._v(" age"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h1",{attrs:{id:"三、其他例子"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、其他例子"}},[t._v("#")]),t._v(" 三、其他例子：")]),t._v(" "),a("ul",[a("li",[t._v('@size (min=6, max=20, message="密码长度只能在6-20之间")')]),t._v(" "),a("li",[t._v('@pattern (regexp="[a-za-z0-9._%+-]+@[a-za-z0-9.-]+.[a-za-z]{2,4}", message="请输入正确的邮件格式")')]),t._v(" "),a("li",[t._v('@Length(min = 5, max = 20, message = "用户名长度必须位于5到20之间")')]),t._v(" "),a("li",[t._v('@Email(message = "请输入正确的邮箱")')]),t._v(" "),a("li",[t._v('@NotNull(message = "用户名称不能为空")')]),t._v(" "),a("li",[t._v('@Max(value = 100, message = "年龄不能大于100岁")')]),t._v(" "),a("li",[t._v('@Min(value= 18 ,message= "必须年满18岁！" )')]),t._v(" "),a("li",[t._v('@AssertTrue(message = "bln4 must is true")')]),t._v(" "),a("li",[t._v('@AssertFalse(message = "blnf must is falase")')]),t._v(" "),a("li",[t._v('@DecimalMax(value="100",message="decim最大值是100")')]),t._v(" "),a("li",[t._v('@DecimalMin(value="100",message="decim最小值是100")')]),t._v(" "),a("li",[t._v('@NotNull(message = "身份证不能为空")')]),t._v(" "),a("li",[t._v('@Pattern(regexp="^(\\d{18,18}|\\d{15,15}|(\\d{17,17}[x|X]))$", message="身份证格式错误")')])]),t._v(" "),a("h1",{attrs:{id:"四、测试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#四、测试"}},[t._v("#")]),t._v(" 四、测试")]),t._v(" "),a("p",[t._v("针对Family的属性校验，只需要写一个测试类，将Family类注入就可以。")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Resource")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Family")]),t._v(" family"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("如果校验失败，会有如下异常。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/krislinzhao/IMGcloud/img/20200417165917.png",alt:""}})])])}),[],!1,null,null,null);a.default=l.exports}}]);