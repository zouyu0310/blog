<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>什么是RabbitMQ？ | zouyu-Blog</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/blog/images/learn.png">
    <meta name="description" content="求知若渴，虚心若愚。 愿你每天都在成长">
    
    <link rel="preload" href="/blog/assets/css/0.styles.b6bbc000.css" as="style"><link rel="preload" href="/blog/assets/js/app.5c484a50.js" as="script"><link rel="preload" href="/blog/assets/js/3.8dc6c122.js" as="script"><link rel="preload" href="/blog/assets/js/35.37abd4f4.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.febbc81f.js"><link rel="prefetch" href="/blog/assets/js/100.9259ef63.js"><link rel="prefetch" href="/blog/assets/js/101.3da27d21.js"><link rel="prefetch" href="/blog/assets/js/102.6fa069ad.js"><link rel="prefetch" href="/blog/assets/js/103.43e9f62f.js"><link rel="prefetch" href="/blog/assets/js/104.6f86dc9e.js"><link rel="prefetch" href="/blog/assets/js/105.4a19bfc6.js"><link rel="prefetch" href="/blog/assets/js/106.e05fe0f9.js"><link rel="prefetch" href="/blog/assets/js/107.9742ed05.js"><link rel="prefetch" href="/blog/assets/js/108.2c8f6f4e.js"><link rel="prefetch" href="/blog/assets/js/109.3b96b505.js"><link rel="prefetch" href="/blog/assets/js/11.6c44e9c9.js"><link rel="prefetch" href="/blog/assets/js/110.3428e3da.js"><link rel="prefetch" href="/blog/assets/js/111.f1864178.js"><link rel="prefetch" href="/blog/assets/js/112.2ef1a6cc.js"><link rel="prefetch" href="/blog/assets/js/113.663107aa.js"><link rel="prefetch" href="/blog/assets/js/114.27ae3724.js"><link rel="prefetch" href="/blog/assets/js/115.da0b4d3a.js"><link rel="prefetch" href="/blog/assets/js/116.fbe6dcd2.js"><link rel="prefetch" href="/blog/assets/js/117.bf1d0b1a.js"><link rel="prefetch" href="/blog/assets/js/118.ac660281.js"><link rel="prefetch" href="/blog/assets/js/119.f381212e.js"><link rel="prefetch" href="/blog/assets/js/12.f16fe947.js"><link rel="prefetch" href="/blog/assets/js/120.d4e55d8d.js"><link rel="prefetch" href="/blog/assets/js/121.bb88ab51.js"><link rel="prefetch" href="/blog/assets/js/122.651f365e.js"><link rel="prefetch" href="/blog/assets/js/123.13ea0580.js"><link rel="prefetch" href="/blog/assets/js/124.6f849caf.js"><link rel="prefetch" href="/blog/assets/js/125.64fd3346.js"><link rel="prefetch" href="/blog/assets/js/126.dac1aa2e.js"><link rel="prefetch" href="/blog/assets/js/127.f9776ae0.js"><link rel="prefetch" href="/blog/assets/js/128.60667ffd.js"><link rel="prefetch" href="/blog/assets/js/129.4e3188ff.js"><link rel="prefetch" href="/blog/assets/js/13.b299c7b1.js"><link rel="prefetch" href="/blog/assets/js/130.714850ba.js"><link rel="prefetch" href="/blog/assets/js/131.0d15a4db.js"><link rel="prefetch" href="/blog/assets/js/132.7f8418d0.js"><link rel="prefetch" href="/blog/assets/js/133.1c5d88c7.js"><link rel="prefetch" href="/blog/assets/js/134.74ba0012.js"><link rel="prefetch" href="/blog/assets/js/135.11ec9e17.js"><link rel="prefetch" href="/blog/assets/js/136.d5e724ce.js"><link rel="prefetch" href="/blog/assets/js/137.bfadad53.js"><link rel="prefetch" href="/blog/assets/js/138.0d07a873.js"><link rel="prefetch" href="/blog/assets/js/139.6a2b3a93.js"><link rel="prefetch" href="/blog/assets/js/14.67fbf28f.js"><link rel="prefetch" href="/blog/assets/js/140.c34f86ef.js"><link rel="prefetch" href="/blog/assets/js/141.3ff0a6ed.js"><link rel="prefetch" href="/blog/assets/js/142.55be366b.js"><link rel="prefetch" href="/blog/assets/js/143.583f3dc6.js"><link rel="prefetch" href="/blog/assets/js/144.a88b6453.js"><link rel="prefetch" href="/blog/assets/js/145.966eae27.js"><link rel="prefetch" href="/blog/assets/js/146.d5da85c2.js"><link rel="prefetch" href="/blog/assets/js/147.96ff5977.js"><link rel="prefetch" href="/blog/assets/js/148.d9973f2d.js"><link rel="prefetch" href="/blog/assets/js/149.f13607c8.js"><link rel="prefetch" href="/blog/assets/js/15.b3e3f322.js"><link rel="prefetch" href="/blog/assets/js/150.50f22aa4.js"><link rel="prefetch" href="/blog/assets/js/151.6c8353f7.js"><link rel="prefetch" href="/blog/assets/js/152.4c15de81.js"><link rel="prefetch" href="/blog/assets/js/153.67297978.js"><link rel="prefetch" href="/blog/assets/js/154.123b78de.js"><link rel="prefetch" href="/blog/assets/js/155.2102ec2d.js"><link rel="prefetch" href="/blog/assets/js/156.3882f181.js"><link rel="prefetch" href="/blog/assets/js/157.685eca62.js"><link rel="prefetch" href="/blog/assets/js/158.9a955ef1.js"><link rel="prefetch" href="/blog/assets/js/159.dbd351c7.js"><link rel="prefetch" href="/blog/assets/js/16.c97a8088.js"><link rel="prefetch" href="/blog/assets/js/160.45a18a5c.js"><link rel="prefetch" href="/blog/assets/js/161.e2497d2b.js"><link rel="prefetch" href="/blog/assets/js/162.8377780a.js"><link rel="prefetch" href="/blog/assets/js/163.ae45f0a5.js"><link rel="prefetch" href="/blog/assets/js/164.6df8087d.js"><link rel="prefetch" href="/blog/assets/js/165.3f6123e3.js"><link rel="prefetch" href="/blog/assets/js/166.e7c96a06.js"><link rel="prefetch" href="/blog/assets/js/167.6030d2c9.js"><link rel="prefetch" href="/blog/assets/js/168.4286e6b2.js"><link rel="prefetch" href="/blog/assets/js/169.d4a167a8.js"><link rel="prefetch" href="/blog/assets/js/17.6cc239d7.js"><link rel="prefetch" href="/blog/assets/js/170.3ba6ab29.js"><link rel="prefetch" href="/blog/assets/js/171.188d2f49.js"><link rel="prefetch" href="/blog/assets/js/172.2466b9d8.js"><link rel="prefetch" href="/blog/assets/js/173.c84b34de.js"><link rel="prefetch" href="/blog/assets/js/174.cb219705.js"><link rel="prefetch" href="/blog/assets/js/175.9316fb59.js"><link rel="prefetch" href="/blog/assets/js/176.36d208a2.js"><link rel="prefetch" href="/blog/assets/js/177.c47c9a81.js"><link rel="prefetch" href="/blog/assets/js/178.51aee8c2.js"><link rel="prefetch" href="/blog/assets/js/179.4a4a372e.js"><link rel="prefetch" href="/blog/assets/js/18.dcbf7d0d.js"><link rel="prefetch" href="/blog/assets/js/180.5b7b3672.js"><link rel="prefetch" href="/blog/assets/js/181.d9cf5f99.js"><link rel="prefetch" href="/blog/assets/js/182.c2635527.js"><link rel="prefetch" href="/blog/assets/js/183.a44ae4fe.js"><link rel="prefetch" href="/blog/assets/js/184.194d8640.js"><link rel="prefetch" href="/blog/assets/js/185.bc5d30a9.js"><link rel="prefetch" href="/blog/assets/js/186.eff8552b.js"><link rel="prefetch" href="/blog/assets/js/187.5d951aeb.js"><link rel="prefetch" href="/blog/assets/js/188.5c1223fa.js"><link rel="prefetch" href="/blog/assets/js/189.5808866f.js"><link rel="prefetch" href="/blog/assets/js/19.2140c229.js"><link rel="prefetch" href="/blog/assets/js/190.994c47f6.js"><link rel="prefetch" href="/blog/assets/js/191.959d5f5f.js"><link rel="prefetch" href="/blog/assets/js/192.b5a07fb6.js"><link rel="prefetch" href="/blog/assets/js/193.311be80e.js"><link rel="prefetch" href="/blog/assets/js/194.82453715.js"><link rel="prefetch" href="/blog/assets/js/195.ff6d8d1d.js"><link rel="prefetch" href="/blog/assets/js/196.5c8e3b0a.js"><link rel="prefetch" href="/blog/assets/js/197.ef0327ec.js"><link rel="prefetch" href="/blog/assets/js/198.3cdb7156.js"><link rel="prefetch" href="/blog/assets/js/199.5c27985a.js"><link rel="prefetch" href="/blog/assets/js/2.1e74d1b7.js"><link rel="prefetch" href="/blog/assets/js/20.d0ed9959.js"><link rel="prefetch" href="/blog/assets/js/200.3456f9ed.js"><link rel="prefetch" href="/blog/assets/js/201.9d75fd1b.js"><link rel="prefetch" href="/blog/assets/js/202.857fb3c0.js"><link rel="prefetch" href="/blog/assets/js/203.7e9c5613.js"><link rel="prefetch" href="/blog/assets/js/204.b8b5fecf.js"><link rel="prefetch" href="/blog/assets/js/205.e94357c3.js"><link rel="prefetch" href="/blog/assets/js/206.241ec95d.js"><link rel="prefetch" href="/blog/assets/js/207.396b4219.js"><link rel="prefetch" href="/blog/assets/js/208.af2e1487.js"><link rel="prefetch" href="/blog/assets/js/209.b51b3443.js"><link rel="prefetch" href="/blog/assets/js/21.b25258d9.js"><link rel="prefetch" href="/blog/assets/js/210.7c7e4e9a.js"><link rel="prefetch" href="/blog/assets/js/211.6ce7171d.js"><link rel="prefetch" href="/blog/assets/js/212.5b57621d.js"><link rel="prefetch" href="/blog/assets/js/213.6ff1fe81.js"><link rel="prefetch" href="/blog/assets/js/214.79574d36.js"><link rel="prefetch" href="/blog/assets/js/215.5f478880.js"><link rel="prefetch" href="/blog/assets/js/216.f1990223.js"><link rel="prefetch" href="/blog/assets/js/217.4f0002d6.js"><link rel="prefetch" href="/blog/assets/js/218.1ebb365c.js"><link rel="prefetch" href="/blog/assets/js/219.e895b4b4.js"><link rel="prefetch" href="/blog/assets/js/22.10048574.js"><link rel="prefetch" href="/blog/assets/js/220.0bde54b7.js"><link rel="prefetch" href="/blog/assets/js/221.40d18f8d.js"><link rel="prefetch" href="/blog/assets/js/222.de2d8c15.js"><link rel="prefetch" href="/blog/assets/js/223.98359f1d.js"><link rel="prefetch" href="/blog/assets/js/224.10eb7b02.js"><link rel="prefetch" href="/blog/assets/js/225.bbc28cd7.js"><link rel="prefetch" href="/blog/assets/js/226.d956a74e.js"><link rel="prefetch" href="/blog/assets/js/227.698f6ee6.js"><link rel="prefetch" href="/blog/assets/js/228.63ee50cc.js"><link rel="prefetch" href="/blog/assets/js/229.b9f12d0e.js"><link rel="prefetch" href="/blog/assets/js/23.736c36fb.js"><link rel="prefetch" href="/blog/assets/js/230.160989ee.js"><link rel="prefetch" href="/blog/assets/js/231.e9fc614f.js"><link rel="prefetch" href="/blog/assets/js/232.09680974.js"><link rel="prefetch" href="/blog/assets/js/233.0b65fbee.js"><link rel="prefetch" href="/blog/assets/js/234.812382ac.js"><link rel="prefetch" href="/blog/assets/js/235.96ed847d.js"><link rel="prefetch" href="/blog/assets/js/236.1b7d21d9.js"><link rel="prefetch" href="/blog/assets/js/237.fd37c628.js"><link rel="prefetch" href="/blog/assets/js/238.b0a306e1.js"><link rel="prefetch" href="/blog/assets/js/239.29816201.js"><link rel="prefetch" href="/blog/assets/js/24.328221fb.js"><link rel="prefetch" href="/blog/assets/js/240.27ff7069.js"><link rel="prefetch" href="/blog/assets/js/241.d209581a.js"><link rel="prefetch" href="/blog/assets/js/242.4c9ff8ec.js"><link rel="prefetch" href="/blog/assets/js/243.977d4f2e.js"><link rel="prefetch" href="/blog/assets/js/244.a8efd7cb.js"><link rel="prefetch" href="/blog/assets/js/245.ef45f9be.js"><link rel="prefetch" href="/blog/assets/js/246.7f700f85.js"><link rel="prefetch" href="/blog/assets/js/247.df65ebb7.js"><link rel="prefetch" href="/blog/assets/js/248.197a8ac5.js"><link rel="prefetch" href="/blog/assets/js/249.bfda2705.js"><link rel="prefetch" href="/blog/assets/js/25.0ee891e6.js"><link rel="prefetch" href="/blog/assets/js/250.050376cc.js"><link rel="prefetch" href="/blog/assets/js/251.60cab832.js"><link rel="prefetch" href="/blog/assets/js/252.95d834d4.js"><link rel="prefetch" href="/blog/assets/js/253.42d40bc3.js"><link rel="prefetch" href="/blog/assets/js/254.1bde8cd1.js"><link rel="prefetch" href="/blog/assets/js/255.896d172a.js"><link rel="prefetch" href="/blog/assets/js/256.fe03a501.js"><link rel="prefetch" href="/blog/assets/js/257.5e4bc841.js"><link rel="prefetch" href="/blog/assets/js/258.2b9e8d1e.js"><link rel="prefetch" href="/blog/assets/js/259.d930ddfd.js"><link rel="prefetch" href="/blog/assets/js/26.c848430e.js"><link rel="prefetch" href="/blog/assets/js/260.1a7df354.js"><link rel="prefetch" href="/blog/assets/js/261.5ae465e5.js"><link rel="prefetch" href="/blog/assets/js/262.1301e18f.js"><link rel="prefetch" href="/blog/assets/js/263.e8152983.js"><link rel="prefetch" href="/blog/assets/js/264.54763d42.js"><link rel="prefetch" href="/blog/assets/js/265.197e4ff1.js"><link rel="prefetch" href="/blog/assets/js/266.5bb41ca7.js"><link rel="prefetch" href="/blog/assets/js/267.4ccc2952.js"><link rel="prefetch" href="/blog/assets/js/268.6c55874d.js"><link rel="prefetch" href="/blog/assets/js/269.16d4a1b6.js"><link rel="prefetch" href="/blog/assets/js/27.5ca08dc3.js"><link rel="prefetch" href="/blog/assets/js/270.062302a3.js"><link rel="prefetch" href="/blog/assets/js/271.f468a365.js"><link rel="prefetch" href="/blog/assets/js/272.7475f532.js"><link rel="prefetch" href="/blog/assets/js/273.0d63a7c5.js"><link rel="prefetch" href="/blog/assets/js/274.578eba27.js"><link rel="prefetch" href="/blog/assets/js/275.1f15360b.js"><link rel="prefetch" href="/blog/assets/js/276.f88b5eb0.js"><link rel="prefetch" href="/blog/assets/js/277.fbd7bc5a.js"><link rel="prefetch" href="/blog/assets/js/278.5aa0b66a.js"><link rel="prefetch" href="/blog/assets/js/279.37efe52d.js"><link rel="prefetch" href="/blog/assets/js/28.a492c74d.js"><link rel="prefetch" href="/blog/assets/js/280.08d98529.js"><link rel="prefetch" href="/blog/assets/js/281.10153dc3.js"><link rel="prefetch" href="/blog/assets/js/282.e5f74d64.js"><link rel="prefetch" href="/blog/assets/js/283.5c392061.js"><link rel="prefetch" href="/blog/assets/js/284.66399a0d.js"><link rel="prefetch" href="/blog/assets/js/285.5dc7dced.js"><link rel="prefetch" href="/blog/assets/js/286.7472a08f.js"><link rel="prefetch" href="/blog/assets/js/287.e3cdd175.js"><link rel="prefetch" href="/blog/assets/js/288.21067c33.js"><link rel="prefetch" href="/blog/assets/js/289.9e36a862.js"><link rel="prefetch" href="/blog/assets/js/29.eadbb91b.js"><link rel="prefetch" href="/blog/assets/js/290.21ac81c4.js"><link rel="prefetch" href="/blog/assets/js/291.de3f0b07.js"><link rel="prefetch" href="/blog/assets/js/292.91f191d1.js"><link rel="prefetch" href="/blog/assets/js/293.f48c5e4c.js"><link rel="prefetch" href="/blog/assets/js/294.f56eb1aa.js"><link rel="prefetch" href="/blog/assets/js/295.6ff86e37.js"><link rel="prefetch" href="/blog/assets/js/296.251d0cf1.js"><link rel="prefetch" href="/blog/assets/js/297.72ae5fbc.js"><link rel="prefetch" href="/blog/assets/js/298.912a5770.js"><link rel="prefetch" href="/blog/assets/js/299.c4c3b63b.js"><link rel="prefetch" href="/blog/assets/js/30.146ee850.js"><link rel="prefetch" href="/blog/assets/js/300.648c3383.js"><link rel="prefetch" href="/blog/assets/js/301.f1fd0ccc.js"><link rel="prefetch" href="/blog/assets/js/302.f7ac91ee.js"><link rel="prefetch" href="/blog/assets/js/303.f50c769e.js"><link rel="prefetch" href="/blog/assets/js/304.5a5924f1.js"><link rel="prefetch" href="/blog/assets/js/305.e78109af.js"><link rel="prefetch" href="/blog/assets/js/306.09a00b3d.js"><link rel="prefetch" href="/blog/assets/js/307.9fa922a5.js"><link rel="prefetch" href="/blog/assets/js/308.74419bea.js"><link rel="prefetch" href="/blog/assets/js/309.2c51491a.js"><link rel="prefetch" href="/blog/assets/js/31.80988661.js"><link rel="prefetch" href="/blog/assets/js/310.156ccd31.js"><link rel="prefetch" href="/blog/assets/js/311.069f1117.js"><link rel="prefetch" href="/blog/assets/js/312.6d459ca6.js"><link rel="prefetch" href="/blog/assets/js/313.6ae7fe1a.js"><link rel="prefetch" href="/blog/assets/js/314.3b47135c.js"><link rel="prefetch" href="/blog/assets/js/315.cba18b5b.js"><link rel="prefetch" href="/blog/assets/js/316.8d67ceb3.js"><link rel="prefetch" href="/blog/assets/js/317.31350d67.js"><link rel="prefetch" href="/blog/assets/js/318.29ad7071.js"><link rel="prefetch" href="/blog/assets/js/319.398d5045.js"><link rel="prefetch" href="/blog/assets/js/32.5a199b69.js"><link rel="prefetch" href="/blog/assets/js/320.b662d484.js"><link rel="prefetch" href="/blog/assets/js/321.b8a7b6e7.js"><link rel="prefetch" href="/blog/assets/js/322.8b0b5761.js"><link rel="prefetch" href="/blog/assets/js/323.4e6ceee7.js"><link rel="prefetch" href="/blog/assets/js/324.65d73c42.js"><link rel="prefetch" href="/blog/assets/js/325.dcbdeae1.js"><link rel="prefetch" href="/blog/assets/js/326.b22c3dfa.js"><link rel="prefetch" href="/blog/assets/js/327.f142e908.js"><link rel="prefetch" href="/blog/assets/js/328.253a21bb.js"><link rel="prefetch" href="/blog/assets/js/329.106d8581.js"><link rel="prefetch" href="/blog/assets/js/33.e7686e07.js"><link rel="prefetch" href="/blog/assets/js/330.529ff8ac.js"><link rel="prefetch" href="/blog/assets/js/331.37cc7ff0.js"><link rel="prefetch" href="/blog/assets/js/332.e9317511.js"><link rel="prefetch" href="/blog/assets/js/333.b5c7e46a.js"><link rel="prefetch" href="/blog/assets/js/334.2009974e.js"><link rel="prefetch" href="/blog/assets/js/335.bca289ec.js"><link rel="prefetch" href="/blog/assets/js/336.84f1154d.js"><link rel="prefetch" href="/blog/assets/js/337.8c97064c.js"><link rel="prefetch" href="/blog/assets/js/338.1d5c1357.js"><link rel="prefetch" href="/blog/assets/js/339.404240c7.js"><link rel="prefetch" href="/blog/assets/js/34.289f8b30.js"><link rel="prefetch" href="/blog/assets/js/340.024ff1f2.js"><link rel="prefetch" href="/blog/assets/js/341.1dee3e73.js"><link rel="prefetch" href="/blog/assets/js/342.e3a8d2f6.js"><link rel="prefetch" href="/blog/assets/js/343.de456d93.js"><link rel="prefetch" href="/blog/assets/js/344.5238d738.js"><link rel="prefetch" href="/blog/assets/js/345.74b731be.js"><link rel="prefetch" href="/blog/assets/js/346.4e4f49af.js"><link rel="prefetch" href="/blog/assets/js/347.2a4e7e0f.js"><link rel="prefetch" href="/blog/assets/js/348.3e73ee18.js"><link rel="prefetch" href="/blog/assets/js/349.d5f7a56f.js"><link rel="prefetch" href="/blog/assets/js/350.77e69f81.js"><link rel="prefetch" href="/blog/assets/js/351.dba0ef29.js"><link rel="prefetch" href="/blog/assets/js/352.750cf699.js"><link rel="prefetch" href="/blog/assets/js/353.f3be4eb7.js"><link rel="prefetch" href="/blog/assets/js/354.6b2a2669.js"><link rel="prefetch" href="/blog/assets/js/355.70868e6b.js"><link rel="prefetch" href="/blog/assets/js/356.0cc39cff.js"><link rel="prefetch" href="/blog/assets/js/357.2ee9aae8.js"><link rel="prefetch" href="/blog/assets/js/358.5b1c11e7.js"><link rel="prefetch" href="/blog/assets/js/359.a8b6bea3.js"><link rel="prefetch" href="/blog/assets/js/36.26eafdd6.js"><link rel="prefetch" href="/blog/assets/js/360.6ed495e2.js"><link rel="prefetch" href="/blog/assets/js/361.c101b410.js"><link rel="prefetch" href="/blog/assets/js/362.24750cde.js"><link rel="prefetch" href="/blog/assets/js/363.020c769d.js"><link rel="prefetch" href="/blog/assets/js/364.7523327f.js"><link rel="prefetch" href="/blog/assets/js/365.92f2559d.js"><link rel="prefetch" href="/blog/assets/js/366.ba082027.js"><link rel="prefetch" href="/blog/assets/js/367.4bdbca64.js"><link rel="prefetch" href="/blog/assets/js/368.79daafc9.js"><link rel="prefetch" href="/blog/assets/js/369.bb30cda0.js"><link rel="prefetch" href="/blog/assets/js/37.8c46f75a.js"><link rel="prefetch" href="/blog/assets/js/370.1cd1987a.js"><link rel="prefetch" href="/blog/assets/js/371.081732d4.js"><link rel="prefetch" href="/blog/assets/js/372.67807a93.js"><link rel="prefetch" href="/blog/assets/js/373.133b4c91.js"><link rel="prefetch" href="/blog/assets/js/374.a96fbb80.js"><link rel="prefetch" href="/blog/assets/js/375.ce2e2a09.js"><link rel="prefetch" href="/blog/assets/js/376.1acbe8f3.js"><link rel="prefetch" href="/blog/assets/js/377.6011b78c.js"><link rel="prefetch" href="/blog/assets/js/378.9411f001.js"><link rel="prefetch" href="/blog/assets/js/379.fc197684.js"><link rel="prefetch" href="/blog/assets/js/38.8036c832.js"><link rel="prefetch" href="/blog/assets/js/380.e682b0f7.js"><link rel="prefetch" href="/blog/assets/js/381.0150670b.js"><link rel="prefetch" href="/blog/assets/js/382.a2a73140.js"><link rel="prefetch" href="/blog/assets/js/383.67492a6d.js"><link rel="prefetch" href="/blog/assets/js/384.0c156684.js"><link rel="prefetch" href="/blog/assets/js/385.7a674006.js"><link rel="prefetch" href="/blog/assets/js/386.7db443e2.js"><link rel="prefetch" href="/blog/assets/js/387.861fc2ad.js"><link rel="prefetch" href="/blog/assets/js/388.53293f8b.js"><link rel="prefetch" href="/blog/assets/js/389.83de2a5a.js"><link rel="prefetch" href="/blog/assets/js/39.1fcc887a.js"><link rel="prefetch" href="/blog/assets/js/390.1b032dee.js"><link rel="prefetch" href="/blog/assets/js/391.5409d13c.js"><link rel="prefetch" href="/blog/assets/js/392.95ee1817.js"><link rel="prefetch" href="/blog/assets/js/393.bfbb4e02.js"><link rel="prefetch" href="/blog/assets/js/394.45f5f3ac.js"><link rel="prefetch" href="/blog/assets/js/395.d2bc26cb.js"><link rel="prefetch" href="/blog/assets/js/396.9b919efe.js"><link rel="prefetch" href="/blog/assets/js/397.63ae1728.js"><link rel="prefetch" href="/blog/assets/js/398.2e8cd381.js"><link rel="prefetch" href="/blog/assets/js/399.cce2bc74.js"><link rel="prefetch" href="/blog/assets/js/4.0a112c8e.js"><link rel="prefetch" href="/blog/assets/js/40.f03ea582.js"><link rel="prefetch" href="/blog/assets/js/400.bb8c8f36.js"><link rel="prefetch" href="/blog/assets/js/401.f6c8e368.js"><link rel="prefetch" href="/blog/assets/js/402.a707dd0b.js"><link rel="prefetch" href="/blog/assets/js/403.0246ef9d.js"><link rel="prefetch" href="/blog/assets/js/404.4e8fab18.js"><link rel="prefetch" href="/blog/assets/js/405.aac86c74.js"><link rel="prefetch" href="/blog/assets/js/406.ec295aee.js"><link rel="prefetch" href="/blog/assets/js/407.0c9bfe75.js"><link rel="prefetch" href="/blog/assets/js/408.90280ec4.js"><link rel="prefetch" href="/blog/assets/js/409.17f43c16.js"><link rel="prefetch" href="/blog/assets/js/41.14a66d79.js"><link rel="prefetch" href="/blog/assets/js/410.a8bcf7af.js"><link rel="prefetch" href="/blog/assets/js/411.1c299cf8.js"><link rel="prefetch" href="/blog/assets/js/412.993fde1e.js"><link rel="prefetch" href="/blog/assets/js/413.24086a2e.js"><link rel="prefetch" href="/blog/assets/js/414.669b21b7.js"><link rel="prefetch" href="/blog/assets/js/415.c6e0b851.js"><link rel="prefetch" href="/blog/assets/js/416.2c0b5a27.js"><link rel="prefetch" href="/blog/assets/js/417.035fbe19.js"><link rel="prefetch" href="/blog/assets/js/418.e9ba8e2d.js"><link rel="prefetch" href="/blog/assets/js/419.40436cbb.js"><link rel="prefetch" href="/blog/assets/js/42.7ca1a3b9.js"><link rel="prefetch" href="/blog/assets/js/420.a44f38b1.js"><link rel="prefetch" href="/blog/assets/js/421.d483449e.js"><link rel="prefetch" href="/blog/assets/js/422.85f0223d.js"><link rel="prefetch" href="/blog/assets/js/423.73b2df81.js"><link rel="prefetch" href="/blog/assets/js/424.c171262a.js"><link rel="prefetch" href="/blog/assets/js/425.84861e5f.js"><link rel="prefetch" href="/blog/assets/js/426.50769ad5.js"><link rel="prefetch" href="/blog/assets/js/427.4f055173.js"><link rel="prefetch" href="/blog/assets/js/428.f1a79a71.js"><link rel="prefetch" href="/blog/assets/js/429.0b1e1ae8.js"><link rel="prefetch" href="/blog/assets/js/43.7f730e4f.js"><link rel="prefetch" href="/blog/assets/js/430.98b90971.js"><link rel="prefetch" href="/blog/assets/js/431.ccab63f7.js"><link rel="prefetch" href="/blog/assets/js/432.b36287bb.js"><link rel="prefetch" href="/blog/assets/js/433.b629a88d.js"><link rel="prefetch" href="/blog/assets/js/434.94c5b829.js"><link rel="prefetch" href="/blog/assets/js/435.2f5ebc90.js"><link rel="prefetch" href="/blog/assets/js/436.af40a468.js"><link rel="prefetch" href="/blog/assets/js/437.1ac4edac.js"><link rel="prefetch" href="/blog/assets/js/438.4b5c3858.js"><link rel="prefetch" href="/blog/assets/js/439.b201f9e1.js"><link rel="prefetch" href="/blog/assets/js/44.6a0d0a24.js"><link rel="prefetch" href="/blog/assets/js/440.90bbfc9c.js"><link rel="prefetch" href="/blog/assets/js/441.edaf49dd.js"><link rel="prefetch" href="/blog/assets/js/442.46358509.js"><link rel="prefetch" href="/blog/assets/js/443.ac894823.js"><link rel="prefetch" href="/blog/assets/js/444.388b0fb5.js"><link rel="prefetch" href="/blog/assets/js/445.5d6dcd5a.js"><link rel="prefetch" href="/blog/assets/js/446.cd463a00.js"><link rel="prefetch" href="/blog/assets/js/447.fa3cf170.js"><link rel="prefetch" href="/blog/assets/js/448.d166f1a6.js"><link rel="prefetch" href="/blog/assets/js/449.9007f738.js"><link rel="prefetch" href="/blog/assets/js/45.ce2504cf.js"><link rel="prefetch" href="/blog/assets/js/450.0e3c2b8d.js"><link rel="prefetch" href="/blog/assets/js/451.77ec44a8.js"><link rel="prefetch" href="/blog/assets/js/452.65334147.js"><link rel="prefetch" href="/blog/assets/js/453.bd40db54.js"><link rel="prefetch" href="/blog/assets/js/454.c680bf9b.js"><link rel="prefetch" href="/blog/assets/js/455.d3ba9987.js"><link rel="prefetch" href="/blog/assets/js/456.ba670ab8.js"><link rel="prefetch" href="/blog/assets/js/457.a56c9694.js"><link rel="prefetch" href="/blog/assets/js/458.8c7575e6.js"><link rel="prefetch" href="/blog/assets/js/459.4f64a00d.js"><link rel="prefetch" href="/blog/assets/js/46.df740708.js"><link rel="prefetch" href="/blog/assets/js/460.12329cff.js"><link rel="prefetch" href="/blog/assets/js/461.eaac64b6.js"><link rel="prefetch" href="/blog/assets/js/462.e8791604.js"><link rel="prefetch" href="/blog/assets/js/463.b7a30366.js"><link rel="prefetch" href="/blog/assets/js/464.9405a358.js"><link rel="prefetch" href="/blog/assets/js/465.a2dc9a55.js"><link rel="prefetch" href="/blog/assets/js/466.069ca07c.js"><link rel="prefetch" href="/blog/assets/js/467.60978d4b.js"><link rel="prefetch" href="/blog/assets/js/468.3ff4f7cd.js"><link rel="prefetch" href="/blog/assets/js/469.35f3e9f1.js"><link rel="prefetch" href="/blog/assets/js/47.63e54aab.js"><link rel="prefetch" href="/blog/assets/js/470.2ae1c32a.js"><link rel="prefetch" href="/blog/assets/js/471.5b85826b.js"><link rel="prefetch" href="/blog/assets/js/472.0542f8ee.js"><link rel="prefetch" href="/blog/assets/js/473.817388b7.js"><link rel="prefetch" href="/blog/assets/js/474.24200d13.js"><link rel="prefetch" href="/blog/assets/js/475.c8782c45.js"><link rel="prefetch" href="/blog/assets/js/476.6db72d54.js"><link rel="prefetch" href="/blog/assets/js/477.95a3d492.js"><link rel="prefetch" href="/blog/assets/js/478.9c8e6497.js"><link rel="prefetch" href="/blog/assets/js/479.35f9bf3b.js"><link rel="prefetch" href="/blog/assets/js/48.83140357.js"><link rel="prefetch" href="/blog/assets/js/480.b51a5165.js"><link rel="prefetch" href="/blog/assets/js/481.4d8e51e2.js"><link rel="prefetch" href="/blog/assets/js/482.65cedab1.js"><link rel="prefetch" href="/blog/assets/js/483.ca1776b9.js"><link rel="prefetch" href="/blog/assets/js/484.33a33eff.js"><link rel="prefetch" href="/blog/assets/js/485.e465197e.js"><link rel="prefetch" href="/blog/assets/js/486.70acef33.js"><link rel="prefetch" href="/blog/assets/js/487.ee3fc769.js"><link rel="prefetch" href="/blog/assets/js/488.a63e51e5.js"><link rel="prefetch" href="/blog/assets/js/489.0f3c49d5.js"><link rel="prefetch" href="/blog/assets/js/49.d8832e95.js"><link rel="prefetch" href="/blog/assets/js/490.5712118b.js"><link rel="prefetch" href="/blog/assets/js/491.5375baa1.js"><link rel="prefetch" href="/blog/assets/js/492.37c94ed4.js"><link rel="prefetch" href="/blog/assets/js/493.9b961f5e.js"><link rel="prefetch" href="/blog/assets/js/494.feea28ac.js"><link rel="prefetch" href="/blog/assets/js/495.98ea50ff.js"><link rel="prefetch" href="/blog/assets/js/496.33d53d3c.js"><link rel="prefetch" href="/blog/assets/js/497.9de40aa3.js"><link rel="prefetch" href="/blog/assets/js/498.4cd030db.js"><link rel="prefetch" href="/blog/assets/js/499.05109d7f.js"><link rel="prefetch" href="/blog/assets/js/5.c0f04726.js"><link rel="prefetch" href="/blog/assets/js/50.2c216e5d.js"><link rel="prefetch" href="/blog/assets/js/500.7b8f1773.js"><link rel="prefetch" href="/blog/assets/js/501.dfbba9a8.js"><link rel="prefetch" href="/blog/assets/js/502.90f5bd1b.js"><link rel="prefetch" href="/blog/assets/js/503.9cefed56.js"><link rel="prefetch" href="/blog/assets/js/504.789de515.js"><link rel="prefetch" href="/blog/assets/js/505.e3eb2619.js"><link rel="prefetch" href="/blog/assets/js/506.26a895a8.js"><link rel="prefetch" href="/blog/assets/js/507.aece8a26.js"><link rel="prefetch" href="/blog/assets/js/508.82ef6fd3.js"><link rel="prefetch" href="/blog/assets/js/509.6617c24f.js"><link rel="prefetch" href="/blog/assets/js/51.9924df0f.js"><link rel="prefetch" href="/blog/assets/js/510.5251c4fc.js"><link rel="prefetch" href="/blog/assets/js/511.15d303a7.js"><link rel="prefetch" href="/blog/assets/js/512.ec4dbe26.js"><link rel="prefetch" href="/blog/assets/js/513.fee5a2b7.js"><link rel="prefetch" href="/blog/assets/js/514.3f48b9d4.js"><link rel="prefetch" href="/blog/assets/js/515.8e750dd4.js"><link rel="prefetch" href="/blog/assets/js/516.bc7ce9ec.js"><link rel="prefetch" href="/blog/assets/js/517.5c273689.js"><link rel="prefetch" href="/blog/assets/js/518.8204db0b.js"><link rel="prefetch" href="/blog/assets/js/519.4069fac5.js"><link rel="prefetch" href="/blog/assets/js/52.c6b270fd.js"><link rel="prefetch" href="/blog/assets/js/520.6052378c.js"><link rel="prefetch" href="/blog/assets/js/521.a84e2f70.js"><link rel="prefetch" href="/blog/assets/js/522.07f1fd3a.js"><link rel="prefetch" href="/blog/assets/js/523.81cd7c5a.js"><link rel="prefetch" href="/blog/assets/js/524.0c27a30c.js"><link rel="prefetch" href="/blog/assets/js/525.3d388127.js"><link rel="prefetch" href="/blog/assets/js/526.da896981.js"><link rel="prefetch" href="/blog/assets/js/53.37b57eac.js"><link rel="prefetch" href="/blog/assets/js/54.07db747b.js"><link rel="prefetch" href="/blog/assets/js/55.74ef4683.js"><link rel="prefetch" href="/blog/assets/js/56.2fef63ab.js"><link rel="prefetch" href="/blog/assets/js/57.ed0c5fb3.js"><link rel="prefetch" href="/blog/assets/js/58.ca7cbf9a.js"><link rel="prefetch" href="/blog/assets/js/59.3c22bc5a.js"><link rel="prefetch" href="/blog/assets/js/6.2297b244.js"><link rel="prefetch" href="/blog/assets/js/60.262e5867.js"><link rel="prefetch" href="/blog/assets/js/61.5636e75a.js"><link rel="prefetch" href="/blog/assets/js/62.7dd1d109.js"><link rel="prefetch" href="/blog/assets/js/63.d0773cdd.js"><link rel="prefetch" href="/blog/assets/js/64.997275ff.js"><link rel="prefetch" href="/blog/assets/js/65.07901344.js"><link rel="prefetch" href="/blog/assets/js/66.c464da45.js"><link rel="prefetch" href="/blog/assets/js/67.feffb1d6.js"><link rel="prefetch" href="/blog/assets/js/68.fcfe1349.js"><link rel="prefetch" href="/blog/assets/js/69.e895924e.js"><link rel="prefetch" href="/blog/assets/js/7.e4af8b84.js"><link rel="prefetch" href="/blog/assets/js/70.078c407f.js"><link rel="prefetch" href="/blog/assets/js/71.557206d7.js"><link rel="prefetch" href="/blog/assets/js/72.e1584320.js"><link rel="prefetch" href="/blog/assets/js/73.48a20011.js"><link rel="prefetch" href="/blog/assets/js/74.20421f04.js"><link rel="prefetch" href="/blog/assets/js/75.3b0e05dc.js"><link rel="prefetch" href="/blog/assets/js/76.2bf10aca.js"><link rel="prefetch" href="/blog/assets/js/77.02348743.js"><link rel="prefetch" href="/blog/assets/js/78.cfbc295c.js"><link rel="prefetch" href="/blog/assets/js/79.453eacb3.js"><link rel="prefetch" href="/blog/assets/js/8.d80735f1.js"><link rel="prefetch" href="/blog/assets/js/80.2b500eb9.js"><link rel="prefetch" href="/blog/assets/js/81.387b7278.js"><link rel="prefetch" href="/blog/assets/js/82.1aa40d78.js"><link rel="prefetch" href="/blog/assets/js/83.17f6510a.js"><link rel="prefetch" href="/blog/assets/js/84.db4405bb.js"><link rel="prefetch" href="/blog/assets/js/85.145ce263.js"><link rel="prefetch" href="/blog/assets/js/86.139ef9a8.js"><link rel="prefetch" href="/blog/assets/js/87.824e85b1.js"><link rel="prefetch" href="/blog/assets/js/88.bd8c36c2.js"><link rel="prefetch" href="/blog/assets/js/89.ff5dab67.js"><link rel="prefetch" href="/blog/assets/js/9.c2a5941b.js"><link rel="prefetch" href="/blog/assets/js/90.750d7f60.js"><link rel="prefetch" href="/blog/assets/js/91.f93ed10a.js"><link rel="prefetch" href="/blog/assets/js/92.a9ecf2e9.js"><link rel="prefetch" href="/blog/assets/js/93.ac344da4.js"><link rel="prefetch" href="/blog/assets/js/94.57871314.js"><link rel="prefetch" href="/blog/assets/js/95.32361ad9.js"><link rel="prefetch" href="/blog/assets/js/96.fa531423.js"><link rel="prefetch" href="/blog/assets/js/97.f3eaaba1.js"><link rel="prefetch" href="/blog/assets/js/98.a6622376.js"><link rel="prefetch" href="/blog/assets/js/99.d04a5a4b.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.b6bbc000.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/images/learn.png" alt="zouyu-Blog" class="logo"> <span class="site-name can-hide">zouyu-Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="笔记文章" class="dropdown-title"><span class="title">笔记文章</span> <span class="arrow down"></span></button> <button type="button" aria-label="笔记文章" class="mobile-dropdown-title"><span class="title">笔记文章</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/SpringCloud/" class="nav-link">
  SpringCloud
</a></li><li class="dropdown-item"><!----> <a href="/blog/Deploy/Jenkins/Jenkins/" class="nav-link">
  Jenkins
</a></li><li class="dropdown-item"><!----> <a href="/blog/Deploy/" class="nav-link">
  Deploy
</a></li></ul></div></div><div class="nav-item"><a href="/blog/about/" class="nav-link">
  关于
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="邹宇的Blog" class="dropdown-title"><span class="title">邹宇的Blog</span> <span class="arrow down"></span></button> <button type="button" aria-label="邹宇的Blog" class="mobile-dropdown-title"><span class="title">邹宇的Blog</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/mqyqingfeng/Blog/issues/235" target="_blank" rel="noopener noreferrer" class="nav-link external">
  搭建
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://zouyu0310.github.io/chatGPT_html/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  chatGPT
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="官方文档学习" class="dropdown-title"><span class="title">官方文档学习</span> <span class="arrow down"></span></button> <button type="button" aria-label="官方文档学习" class="mobile-dropdown-title"><span class="title">官方文档学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.vuepress.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  跳转
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="笔记文章" class="dropdown-title"><span class="title">笔记文章</span> <span class="arrow down"></span></button> <button type="button" aria-label="笔记文章" class="mobile-dropdown-title"><span class="title">笔记文章</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/SpringCloud/" class="nav-link">
  SpringCloud
</a></li><li class="dropdown-item"><!----> <a href="/blog/Deploy/Jenkins/Jenkins/" class="nav-link">
  Jenkins
</a></li><li class="dropdown-item"><!----> <a href="/blog/Deploy/" class="nav-link">
  Deploy
</a></li></ul></div></div><div class="nav-item"><a href="/blog/about/" class="nav-link">
  关于
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="邹宇的Blog" class="dropdown-title"><span class="title">邹宇的Blog</span> <span class="arrow down"></span></button> <button type="button" aria-label="邹宇的Blog" class="mobile-dropdown-title"><span class="title">邹宇的Blog</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/mqyqingfeng/Blog/issues/235" target="_blank" rel="noopener noreferrer" class="nav-link external">
  搭建
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://zouyu0310.github.io/chatGPT_html/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  chatGPT
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="官方文档学习" class="dropdown-title"><span class="title">官方文档学习</span> <span class="arrow down"></span></button> <button type="button" aria-label="官方文档学习" class="mobile-dropdown-title"><span class="title">官方文档学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.vuepress.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  跳转
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>About</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Business</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Database</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Deploy</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Interview</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Java</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>MQ</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/MQ/01 RabbitMQ.html" class="active sidebar-link">什么是RabbitMQ？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/MQ/01 RabbitMQ.html#什么是rabbitmq" class="sidebar-link">什么是RabbitMQ？</a></li><li class="sidebar-sub-header"><a href="/blog/MQ/01 RabbitMQ.html#rabbitmq的组件" class="sidebar-link">[#](#rabbitmq的组件) RabbitMQ的组件</a></li><li class="sidebar-sub-header"><a href="/blog/MQ/01 RabbitMQ.html#什么时候使用mq" class="sidebar-link">[#](#什么时候使用mq) 什么时候使用MQ</a></li><li class="sidebar-sub-header"><a href="/blog/MQ/01 RabbitMQ.html#rabbitmq的优缺点" class="sidebar-link">[#](#rabbitmq的优缺点) RabbitMQ的优缺点</a></li><li class="sidebar-sub-header"><a href="/blog/MQ/01 RabbitMQ.html#rabbitmq-有哪些重要的角色" class="sidebar-link">[#](#rabbitmq-有哪些重要的角色) RabbitMQ 有哪些重要的角色？</a></li><li class="sidebar-sub-header"><a href="/blog/MQ/01 RabbitMQ.html#exchange-类型" class="sidebar-link">[#](#exchange-类型) Exchange 类型</a></li><li class="sidebar-sub-header"><a href="/blog/MQ/01 RabbitMQ.html#消息丢失" class="sidebar-link">[#](#消息丢失) 消息丢失</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/MQ/01 RabbitMQ.html#生产者确认机制" class="sidebar-link">[#](#生产者确认机制) 生产者确认机制</a></li><li class="sidebar-sub-header"><a href="/blog/MQ/01 RabbitMQ.html#路由不可达消息" class="sidebar-link">[#](#路由不可达消息) 路由不可达消息</a></li><li class="sidebar-sub-header"><a href="/blog/MQ/01 RabbitMQ.html#消费者手动消息确认" class="sidebar-link">[#](#消费者手动消息确认) 消费者手动消息确认</a></li><li class="sidebar-sub-header"><a href="/blog/MQ/01 RabbitMQ.html#持久化" class="sidebar-link">[#](#持久化) 持久化</a></li><li class="sidebar-sub-header"><a href="/blog/MQ/01 RabbitMQ.html#镜像队列" class="sidebar-link">[#](#镜像队列) 镜像队列</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/MQ/01 RabbitMQ.html#消息重复消费怎么处理" class="sidebar-link">[#](#消息重复消费怎么处理) 消息重复消费怎么处理？</a></li><li class="sidebar-sub-header"><a href="/blog/MQ/01 RabbitMQ.html#消费端怎么进行限流" class="sidebar-link">[#](#消费端怎么进行限流) 消费端怎么进行限流？</a></li><li class="sidebar-sub-header"><a href="/blog/MQ/01 RabbitMQ.html#什么是死信队列" class="sidebar-link">[#](#什么是死信队列) 什么是死信队列？</a></li><li class="sidebar-sub-header"><a href="/blog/MQ/01 RabbitMQ.html#说说pull模式" class="sidebar-link">[#](#说说pull模式) 说说pull模式</a></li><li class="sidebar-sub-header"><a href="/blog/MQ/01 RabbitMQ.html#怎么设置消息的过期时间" class="sidebar-link">[#](#怎么设置消息的过期时间) 怎么设置消息的过期时间？</a></li></ul></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>常见问题</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Other</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Server</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Spring Boot</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Spring Cloud</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Tools</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Web</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Work Doc</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>尚硅谷 Redis</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="什么是rabbitmq"><a href="#什么是rabbitmq" class="header-anchor">#</a> 什么是RabbitMQ？</h2> <p>RabbitMQ是一个由erlang开发的消息队列。消息队列用于应用间的异步协作。</p> <p><img src="data:image/png;base64,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" alt="img"></p> <h2 id="rabbitmq的组件"><a href="#rabbitmq的组件" class="header-anchor">#</a> <a href="#rabbitmq%E7%9A%84%E7%BB%84%E4%BB%B6">#</a> RabbitMQ的组件</h2> <p>Message：由消息头和消息体组成。消息体是不透明的，而消息头则由一系列的可选属性组成，这些属性包括routing-key、priority、delivery-mode（是否持久性存储）等。</p> <p>Publisher：消息的生产者。</p> <p>Exchange：接收消息并将消息路由到一个或多个Queue。default exchange 是默认的直连交换机，名字为空字符串，每个新建队列都会自动绑定到默认交换机上，绑定的路由键名称与队列名称相同。</p> <p>Binding：通过Binding将Exchange和Queue关联，这样Exchange就知道将消息路由到哪个Queue中。</p> <p>Queue：存储消息，队列的特性是先进先出。一个消息可分发到一个或多个队列。</p> <p>Virtual host：每个 vhost 本质上就是一个 mini 版的 RabbitMQ 服务器，拥有自己的队列、交换器、绑定和权限机制。vhost 是 AMQP 概念的基础，必须在连接时指定，RabbitMQ 默认的 vhost 是 / 。当多个不同的用户使用同一个RabbitMQ server提供的服务时，可以划分出多个vhost，每个用户在自己的vhost创建exchange和queue。</p> <p>Broker：消息队列服务器实体。</p> <h2 id="什么时候使用mq"><a href="#什么时候使用mq" class="header-anchor">#</a> <a href="#%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E4%BD%BF%E7%94%A8mq">#</a> 什么时候使用MQ</h2> <p>对于一些不需要立即生效的操作，可以拆分出来，异步执行，使用消息队列实现。</p> <p>以常见的订单系统为例，用户点击下单按钮之后的业务逻辑可能包括：扣减库存、生成相应单据、发短信通知。这种场景下就可以用 MQ 。将短信通知放到 MQ 异步执行，在下单的主流程（比如扣减库存、生成相应单据）完成之后发送一条消息到 MQ， 让主流程快速完结，而由另外的线程消费MQ的消息。</p> <p>业务场景:</p> <ol><li>支付结算</li> <li>消息推送 stomp</li> <li>合同付款核算</li></ol> <h2 id="rabbitmq的优缺点"><a href="#rabbitmq的优缺点" class="header-anchor">#</a> <a href="#rabbitmq%E7%9A%84%E4%BC%98%E7%BC%BA%E7%82%B9">#</a> RabbitMQ的优缺点</h2> <p>缺点：使用erlang实现，不利于二次开发和维护；性能较kafka差，持久化消息和ACK确认的情况下生产和消费消息单机吞吐量大约在1-2万左右，kafka单机吞吐量在十万级别。</p> <p>优点：有管理界面，方便使用；可靠性高；功能丰富，支持消息持久化、消息确认机制、多种消息分发机制。</p> <h2 id="rabbitmq-有哪些重要的角色"><a href="#rabbitmq-有哪些重要的角色" class="header-anchor">#</a> <a href="#rabbitmq-%E6%9C%89%E5%93%AA%E4%BA%9B%E9%87%8D%E8%A6%81%E7%9A%84%E8%A7%92%E8%89%B2">#</a> RabbitMQ 有哪些重要的角色？</h2> <p>RabbitMQ 中重要的角色有：生产者、消费者和代理。</p> <ol><li>生产者：消息的创建者，负责创建和推送数据到消息服务器；</li> <li>消费者：消息的接收方，用于处理数据和确认消息；</li> <li>代理：就是 RabbitMQ 本身，用于扮演“快递”的角色，本身不生产消息，只是扮演“快递”的角色。</li></ol> <h2 id="exchange-类型"><a href="#exchange-类型" class="header-anchor">#</a> <a href="#exchange-%E7%B1%BB%E5%9E%8B">#</a> Exchange 类型</h2> <p>Exchange分发消息时根据类型的不同分发策略不同，目前共四种类型：direct、fanout、topic、headers 。headers 模式根据消息的headers进行路由，此外 headers 交换器和 direct 交换器完全一致，但性能差很多。</p> <p>Exchange规则。</p> <table><thead><tr><th>类型名称</th> <th>类型描述</th></tr></thead> <tbody><tr><td>fanout</td> <td>把所有发送到该Exchange的消息路由到所有与它绑定的Queue中</td></tr> <tr><td>direct</td> <td>Routing Key==Binding Key</td></tr> <tr><td>topic</td> <td>模糊匹配</td></tr> <tr><td>headers</td> <td>Exchange不依赖于routing key与binding key的匹配规则来路由消息，而是根据发送的消息内容中的header属性进行匹配。</td></tr></tbody></table> <p><strong>direct</strong></p> <p>direct交换机会将消息路由到binding key 和 routing key完全匹配的队列中。它是完全匹配、单播的模式。</p> <p><img src="data:image/png;base64,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" alt="img"></p> <p><strong>fanout</strong></p> <p>所有发到 fanout 类型交换机的消息都会路由到所有与该交换机绑定的队列上去。fanout 类型转发消息是最快的。</p> <p><img src="data:image/png;base64,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" alt="img"></p> <p><strong>topic</strong></p> <p>topic交换机使用routing key和binding key进行模糊匹配，匹配成功则将消息发送到相应的队列。routing key和binding key都是句点号“. ”分隔的字符串，binding key中可以存在两种特殊字符“<em>”与“##”，用于做模糊匹配，其中“</em>”用于匹配一个单词，“##”用于匹配多个单词。</p> <p><img src="/blog/assets/img/rabbitmq-topic.5c39b9f5.png" alt="img"></p> <p><strong>headers</strong></p> <p>headers交换机是根据发送的消息内容中的headers属性进行路由的。在绑定Queue与Exchange时指定一组键值对；当消息发送到Exchange时，RabbitMQ会取到该消息的headers（也是一个键值对的形式），对比其中的键值对是否完全匹配Queue与Exchange绑定时指定的键值对；如果完全匹配则消息会路由到该Queue，否则不会路由到该Queue。</p> <h2 id="消息丢失"><a href="#消息丢失" class="header-anchor">#</a> <a href="#%E6%B6%88%E6%81%AF%E4%B8%A2%E5%A4%B1">#</a> 消息丢失</h2> <p>消息丢失场景：生产者生产消息到RabbitMQ Server消息丢失、RabbitMQ Server存储的消息丢失和RabbitMQ Server到消费者消息丢失。</p> <p>消息丢失从三个方面来解决：生产者确认机制、消费者手动确认消息和持久化。</p> <h3 id="生产者确认机制"><a href="#生产者确认机制" class="header-anchor">#</a> <a href="#%E7%94%9F%E4%BA%A7%E8%80%85%E7%A1%AE%E8%AE%A4%E6%9C%BA%E5%88%B6">#</a> 生产者确认机制</h3> <p>生产者发送消息到队列，无法确保发送的消息成功的到达server。</p> <p>解决方法：</p> <ol><li>事务机制。在一条消息发送之后会使发送端阻塞，等待RabbitMQ的回应，之后才能继续发送下一条消息。性能差。</li> <li>开启生产者确认机制，只要消息成功发送到交换机之后，RabbitMQ就会发送一个ack给生产者（即使消息没有Queue接收，也会发送ack）。如果消息没有成功发送到交换机，就会发送一条nack消息，提示发送失败。</li></ol> <p>在 Springboot 是通过 publisher-confirms 参数来设置 confirm 模式：</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
    <span class="token key atrule">rabbitmq</span><span class="token punctuation">:</span>   
        <span class="token comment">##开启 confirm 确认机制</span>
        <span class="token key atrule">publisher-confirms</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre></div><p>在生产端提供一个回调方法，当服务端确认了一条或者多条消息后，生产者会回调这个方法，根据具体的结果对消息进行后续处理，比如重新发送、记录日志等。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// 消息是否成功发送到Exchange</span>
<span class="token keyword">final</span> <span class="token class-name">RabbitTemplate<span class="token punctuation">.</span>ConfirmCallback</span> confirmCallback <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">CorrelationData</span> correlationData<span class="token punctuation">,</span> <span class="token keyword">boolean</span> ack<span class="token punctuation">,</span> <span class="token class-name">String</span> cause<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;correlationData: &quot;</span> <span class="token operator">+</span> correlationData<span class="token punctuation">)</span><span class="token punctuation">;</span>
            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;ack: &quot;</span> <span class="token operator">+</span> ack<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>ack<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;异常处理....&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

rabbitTemplate<span class="token punctuation">.</span><span class="token function">setConfirmCallback</span><span class="token punctuation">(</span>confirmCallback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="路由不可达消息"><a href="#路由不可达消息" class="header-anchor">#</a> <a href="#%E8%B7%AF%E7%94%B1%E4%B8%8D%E5%8F%AF%E8%BE%BE%E6%B6%88%E6%81%AF">#</a> 路由不可达消息</h3> <p>生产者确认机制只确保消息正确到达交换机，对于从交换机路由到Queue失败的消息，会被丢弃掉，导致消息丢失。</p> <p>对于不可路由的消息，有两种处理方式：Return消息机制和备份交换机。</p> <p><strong>Return消息机制</strong></p> <p>Return消息机制提供了回调函数 ReturnCallback，当消息从交换机路由到Queue失败才会回调这个方法。需要将<code>mandatory</code> 设置为 <code>true</code> ，才能监听到路由不可达的消息。</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
    <span class="token key atrule">rabbitmq</span><span class="token punctuation">:</span>
        <span class="token comment">##触发ReturnCallback必须设置mandatory=true, 否则Exchange没有找到Queue就会丢弃掉消息, 而不会触发ReturnCallback</span>
        <span class="token key atrule">template.mandatory</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre></div><p>通过 ReturnCallback 监听路由不可达消息。</p> <div class="language-java extra-class"><pre class="language-java"><code>    <span class="token keyword">final</span> <span class="token class-name">RabbitTemplate<span class="token punctuation">.</span>ReturnCallback</span> returnCallback <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Message</span> message<span class="token punctuation">,</span> <span class="token keyword">int</span> replyCode<span class="token punctuation">,</span> <span class="token class-name">String</span> replyText<span class="token punctuation">,</span> <span class="token class-name">String</span> exchange<span class="token punctuation">,</span> <span class="token class-name">String</span> routingKey<span class="token punctuation">)</span> <span class="token operator">-&gt;</span>
            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;return exchange: &quot;</span> <span class="token operator">+</span> exchange <span class="token operator">+</span> <span class="token string">&quot;, routingKey: &quot;</span>
                    <span class="token operator">+</span> routingKey <span class="token operator">+</span> <span class="token string">&quot;, replyCode: &quot;</span> <span class="token operator">+</span> replyCode <span class="token operator">+</span> <span class="token string">&quot;, replyText: &quot;</span> <span class="token operator">+</span> replyText<span class="token punctuation">)</span><span class="token punctuation">;</span>
rabbitTemplate<span class="token punctuation">.</span><span class="token function">setReturnCallback</span><span class="token punctuation">(</span>returnCallback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>当消息从交换机路由到Queue失败时，会返回 <code>return exchange: , routingKey: MAIL, replyCode: 312, replyText: NO_ROUTE</code>。</p> <p><strong>备份交换机</strong></p> <p>备份交换机alternate-exchange 是一个普通的exchange，当你发送消息到对应的exchange时，没有匹配到queue，就会自动转移到备份交换机对应的queue，这样消息就不会丢失。</p> <h3 id="消费者手动消息确认"><a href="#消费者手动消息确认" class="header-anchor">#</a> <a href="#%E6%B6%88%E8%B4%B9%E8%80%85%E6%89%8B%E5%8A%A8%E6%B6%88%E6%81%AF%E7%A1%AE%E8%AE%A4">#</a> 消费者手动消息确认</h3> <p>有可能消费者收到消息还没来得及处理MQ服务就宕机了，导致消息丢失。因为消息者默认采用自动ack，一旦消费者收到消息后会通知MQ Server这条消息已经处理好了，MQ 就会移除这条消息。</p> <p>解决方法：消费者设置为手动确认消息。消费者处理完逻辑之后再给broker回复ack，表示消息已经成功消费，可以从broker中删除。当消息者消费失败的时候，给broker回复nack，根据配置决定重新入队还是从broker移除，或者进入死信队列。只要没收到消费者的 acknowledgment，broker 就会一直保存着这条消息，但不会 requeue，也不会分配给其他 消费者。</p> <p>消费者设置手动ack：</p> <div class="language-java extra-class"><pre class="language-java"><code>##设置消费端手动 ack
spring<span class="token punctuation">.</span>rabbitmq<span class="token punctuation">.</span>listener<span class="token punctuation">.</span>simple<span class="token punctuation">.</span>acknowledge<span class="token operator">-</span>mode<span class="token operator">=</span>manual
</code></pre></div><p>消息处理完，手动确认：</p> <div class="language-java extra-class"><pre class="language-java"><code>    <span class="token annotation punctuation">@RabbitListener</span><span class="token punctuation">(</span>queues <span class="token operator">=</span> <span class="token class-name">RabbitMqConfig</span><span class="token punctuation">.</span><span class="token constant">MAIL_QUEUE</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onMessage</span><span class="token punctuation">(</span><span class="token class-name">Message</span> message<span class="token punctuation">,</span> <span class="token class-name">Channel</span> channel<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">long</span> deliveryTag <span class="token operator">=</span> message<span class="token punctuation">.</span><span class="token function">getMessageProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDeliveryTag</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//手工ack；第二个参数是multiple，设置为true，表示deliveryTag序列号之前（包括自身）的消息都已经收到，设为false则表示收到一条消息</span>
        channel<span class="token punctuation">.</span><span class="token function">basicAck</span><span class="token punctuation">(</span>deliveryTag<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;mail listener receive: &quot;</span> <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><p>当消息消费失败时，消费端给broker回复nack，如果consumer设置了requeue为false，则nack后broker会删除消息或者进入死信队列，否则消息会重新入队。</p> <h3 id="持久化"><a href="#持久化" class="header-anchor">#</a> <a href="#%E6%8C%81%E4%B9%85%E5%8C%96">#</a> 持久化</h3> <p>如果RabbitMQ服务异常导致重启，将会导致消息丢失。RabbitMQ提供了持久化的机制，将内存中的消息持久化到硬盘上，即使重启RabbitMQ，消息也不会丢失。</p> <p>消息持久化需要满足以下条件：</p> <ol><li>消息设置持久化。发布消息前，设置投递模式delivery mode为2，表示消息需要持久化。</li> <li>Queue设置持久化。</li> <li>交换机设置持久化。</li></ol> <p>当发布一条消息到交换机上时，Rabbit会先把消息写入持久化日志，然后才向生产者发送响应。一旦从队列中消费了一条消息的话并且做了确认，RabbitMQ会在持久化日志中移除这条消息。在消费消息前，如果RabbitMQ重启的话，服务器会自动重建交换机和队列，加载持久化日志中的消息到相应的队列或者交换机上，保证消息不会丢失。</p> <h3 id="镜像队列"><a href="#镜像队列" class="header-anchor">#</a> <a href="#%E9%95%9C%E5%83%8F%E9%98%9F%E5%88%97">#</a> 镜像队列</h3> <p>当MQ发生故障时，会导致服务不可用。引入RabbitMQ的镜像队列机制，将queue镜像到集群中其他的节点之上。如果集群中的一个节点失效了，能自动地切换到镜像中的另一个节点以保证服务的可用性。</p> <p>通常每一个镜像队列都包含一个master和多个slave，分别对应于不同的节点。发送到镜像队列的所有消息总是被直接发送到master和所有的slave之上。除了publish外所有动作都只会向master发送，然后由master将命令执行的结果广播给slave，从镜像队列中的消费操作实际上是在master上执行的。</p> <h2 id="消息重复消费怎么处理"><a href="#消息重复消费怎么处理" class="header-anchor">#</a> <a href="#%E6%B6%88%E6%81%AF%E9%87%8D%E5%A4%8D%E6%B6%88%E8%B4%B9%E6%80%8E%E4%B9%88%E5%A4%84%E7%90%86">#</a> 消息重复消费怎么处理？</h2> <p>消息重复的原因有两个：1.生产时消息重复，2.消费时消息重复。</p> <p>生产者发送消息给MQ，在MQ确认的时候出现了网络波动，生产者没有收到确认，这时候生产者就会重新发送这条消息，导致MQ会接收到重复消息。</p> <p>消费者消费成功后，给MQ确认的时候出现了网络波动，MQ没有接收到确认，为了保证消息不丢失，MQ就会继续给消费者投递之前的消息。这时候消费者就接收到了两条一样的消息。由于重复消息是由于网络原因造成的，无法避免。</p> <p>解决方法：发送消息时让每个消息携带一个全局的唯一ID，在消费消息时先判断消息是否已经被消费过，保证消息消费逻辑的幂等性。具体消费过程为：</p> <ol><li>消费者获取到消息后先根据id去查询redis/db是否存在该消息</li> <li>如果不存在，则正常消费，消费完毕后写入redis/db</li> <li>如果存在，则证明消息被消费过，直接丢弃</li></ol> <h2 id="消费端怎么进行限流"><a href="#消费端怎么进行限流" class="header-anchor">#</a> <a href="#%E6%B6%88%E8%B4%B9%E7%AB%AF%E6%80%8E%E4%B9%88%E8%BF%9B%E8%A1%8C%E9%99%90%E6%B5%81">#</a> 消费端怎么进行限流？</h2> <p>当 RabbitMQ 服务器积压大量消息时，队列里的消息会大量涌入消费端，可能导致消费端服务器奔溃。这种情况下需要对消费端限流。</p> <p>Spring RabbitMQ 提供参数 prefetch 可以设置单个请求处理的消息个数。如果消费者同时处理的消息到达最大值的时候，则该消费者会阻塞，不会消费新的消息，直到有消息 ack 才会消费新的消息。</p> <p>开启消费端限流：</p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token comment">##在单个请求中处理的消息个数，unack的最大数量</span>
<span class="token key attr-name">spring.rabbitmq.listener.simple.prefetch</span><span class="token punctuation">=</span><span class="token value attr-value">2</span>
</code></pre></div><p>原生 RabbitMQ 还提供 prefetchSize 和 global 两个参数。Spring RabbitMQ没有这两个参数。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//单条消息大小限制，0代表不限制</span>
<span class="token comment">//global：限制限流功能是channel级别的还是consumer级别。当设置为false，consumer级别，限流功能生效，设置为true没有了限流功能，因为channel级别尚未实现。</span>
<span class="token keyword">void</span> <span class="token function">basicQos</span><span class="token punctuation">(</span><span class="token keyword">int</span> prefetchSize<span class="token punctuation">,</span> <span class="token keyword">int</span> prefetchCount<span class="token punctuation">,</span> <span class="token keyword">boolean</span> global<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="什么是死信队列"><a href="#什么是死信队列" class="header-anchor">#</a> <a href="#%E4%BB%80%E4%B9%88%E6%98%AF%E6%AD%BB%E4%BF%A1%E9%98%9F%E5%88%97">#</a> 什么是死信队列？</h2> <p>消费失败的消息存放的队列。</p> <p>消息消费失败的原因：</p> <ul><li>消息被拒绝并且消息没有重新入队（requeue=false）</li> <li>消息超时未消费</li> <li>达到最大队列长度</li></ul> <p>设置死信队列的 exchange 和 queue，然后进行绑定：</p> <div class="language-java extra-class"><pre class="language-java"><code>	<span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">DirectExchange</span> <span class="token function">dlxExchange</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">DirectExchange</span><span class="token punctuation">(</span><span class="token class-name">RabbitMqConfig</span><span class="token punctuation">.</span><span class="token constant">DLX_EXCHANGE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Queue</span> <span class="token function">dlxQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Queue</span><span class="token punctuation">(</span><span class="token class-name">RabbitMqConfig</span><span class="token punctuation">.</span><span class="token constant">DLX_QUEUE</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Binding</span> <span class="token function">bindingDeadExchange</span><span class="token punctuation">(</span><span class="token class-name">Queue</span> dlxQueue<span class="token punctuation">,</span> <span class="token class-name">DirectExchange</span> deadExchange<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">BindingBuilder</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>dlxQueue<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span>deadExchange<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">with</span><span class="token punctuation">(</span><span class="token class-name">RabbitMqConfig</span><span class="token punctuation">.</span><span class="token constant">DLX_QUEUE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><p>在普通队列加上两个参数，绑定普通队列到死信队列。当消息消费失败时，消息会被路由到死信队列。</p> <div class="language-java extra-class"><pre class="language-java"><code>    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Queue</span> <span class="token function">sendSmsQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> arguments <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 绑定该队列到私信交换机</span>
        arguments<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;x-dead-letter-exchange&quot;</span><span class="token punctuation">,</span> <span class="token class-name">RabbitMqConfig</span><span class="token punctuation">.</span><span class="token constant">DLX_EXCHANGE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        arguments<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;x-dead-letter-routing-key&quot;</span><span class="token punctuation">,</span> <span class="token class-name">RabbitMqConfig</span><span class="token punctuation">.</span><span class="token constant">DLX_QUEUE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Queue</span><span class="token punctuation">(</span><span class="token class-name">RabbitMqConfig</span><span class="token punctuation">.</span><span class="token constant">MAIL_QUEUE</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><p>生产者完整代码：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MQProducer</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token class-name">RabbitTemplate</span> rabbitTemplate<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token class-name">RandomUtil</span> randomUtil<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token class-name">UserService</span> userService<span class="token punctuation">;</span>

    <span class="token keyword">final</span> <span class="token class-name">RabbitTemplate<span class="token punctuation">.</span>ConfirmCallback</span> confirmCallback <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">CorrelationData</span> correlationData<span class="token punctuation">,</span> <span class="token keyword">boolean</span> ack<span class="token punctuation">,</span> <span class="token class-name">String</span> cause<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;correlationData: &quot;</span> <span class="token operator">+</span> correlationData<span class="token punctuation">)</span><span class="token punctuation">;</span>
            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;ack: &quot;</span> <span class="token operator">+</span> ack<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>ack<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;异常处理....&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>


    <span class="token keyword">final</span> <span class="token class-name">RabbitTemplate<span class="token punctuation">.</span>ReturnCallback</span> returnCallback <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Message</span> message<span class="token punctuation">,</span> <span class="token keyword">int</span> replyCode<span class="token punctuation">,</span> <span class="token class-name">String</span> replyText<span class="token punctuation">,</span> <span class="token class-name">String</span> exchange<span class="token punctuation">,</span> <span class="token class-name">String</span> routingKey<span class="token punctuation">)</span> <span class="token operator">-&gt;</span>
            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;return exchange: &quot;</span> <span class="token operator">+</span> exchange <span class="token operator">+</span> <span class="token string">&quot;, routingKey: &quot;</span>
                    <span class="token operator">+</span> routingKey <span class="token operator">+</span> <span class="token string">&quot;, replyCode: &quot;</span> <span class="token operator">+</span> replyCode <span class="token operator">+</span> <span class="token string">&quot;, replyText: &quot;</span> <span class="token operator">+</span> replyText<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendMail</span><span class="token punctuation">(</span><span class="token class-name">String</span> mail<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//貌似线程不安全 范围100000 - 999999</span>
        <span class="token class-name">Integer</span> random <span class="token operator">=</span> randomUtil<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token number">100000</span><span class="token punctuation">,</span> <span class="token number">999999</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> code <span class="token operator">=</span> random<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;mail&quot;</span><span class="token punctuation">,</span> mail<span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;code&quot;</span><span class="token punctuation">,</span> code<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">MessageProperties</span> mp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MessageProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//在生产环境中这里不用Message，而是使用 fastJson 等工具将对象转换为 json 格式发送</span>
        <span class="token class-name">Message</span> msg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Message</span><span class="token punctuation">(</span><span class="token string">&quot;tyson&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> mp<span class="token punctuation">)</span><span class="token punctuation">;</span>
        msg<span class="token punctuation">.</span><span class="token function">getMessageProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setExpiration</span><span class="token punctuation">(</span><span class="token string">&quot;3000&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//如果消费端要设置为手工 ACK ，那么生产端发送消息的时候一定发送 correlationData ，并且全局唯一，用以唯一标识消息。</span>
        <span class="token class-name">CorrelationData</span> correlationData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CorrelationData</span><span class="token punctuation">(</span><span class="token string">&quot;1234567890&quot;</span><span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        rabbitTemplate<span class="token punctuation">.</span><span class="token function">setMandatory</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        rabbitTemplate<span class="token punctuation">.</span><span class="token function">setConfirmCallback</span><span class="token punctuation">(</span>confirmCallback<span class="token punctuation">)</span><span class="token punctuation">;</span>
        rabbitTemplate<span class="token punctuation">.</span><span class="token function">setReturnCallback</span><span class="token punctuation">(</span>returnCallback<span class="token punctuation">)</span><span class="token punctuation">;</span>
        rabbitTemplate<span class="token punctuation">.</span><span class="token function">convertAndSend</span><span class="token punctuation">(</span><span class="token class-name">RabbitMqConfig</span><span class="token punctuation">.</span><span class="token constant">MAIL_QUEUE</span><span class="token punctuation">,</span> msg<span class="token punctuation">,</span> correlationData<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//存入redis</span>
        userService<span class="token punctuation">.</span><span class="token function">updateMailSendState</span><span class="token punctuation">(</span>mail<span class="token punctuation">,</span> code<span class="token punctuation">,</span> <span class="token class-name">MailConfig</span><span class="token punctuation">.</span><span class="token constant">MAIL_STATE_WAIT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>消费者完整代码：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Slf4j</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DeadListener</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@RabbitListener</span><span class="token punctuation">(</span>queues <span class="token operator">=</span> <span class="token class-name">RabbitMqConfig</span><span class="token punctuation">.</span><span class="token constant">DLX_QUEUE</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onMessage</span><span class="token punctuation">(</span><span class="token class-name">Message</span> message<span class="token punctuation">,</span> <span class="token class-name">Channel</span> channel<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">long</span> deliveryTag <span class="token operator">=</span> message<span class="token punctuation">.</span><span class="token function">getMessageProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDeliveryTag</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//手工ack</span>
        channel<span class="token punctuation">.</span><span class="token function">basicAck</span><span class="token punctuation">(</span>deliveryTag<span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;receive--1: &quot;</span> <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>当普通队列中有死信时，RabbitMQ 就会自动的将这个消息重新发布到设置的死信交换机去，然后被路由到死信队列。可以监听死信队列中的消息做相应的处理。</p> <h2 id="说说pull模式"><a href="#说说pull模式" class="header-anchor">#</a> <a href="#%E8%AF%B4%E8%AF%B4pull%E6%A8%A1%E5%BC%8F">#</a> 说说pull模式</h2> <p>pull模式主要是通过channel.basicGet方法来获取消息，示例代码如下：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">GetResponse</span> response <span class="token operator">=</span> channel<span class="token punctuation">.</span><span class="token function">basicGet</span><span class="token punctuation">(</span><span class="token constant">QUEUE_NAME</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
channel<span class="token punctuation">.</span><span class="token function">basicAck</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span><span class="token function">getEnvelope</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDeliveryTag</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="怎么设置消息的过期时间"><a href="#怎么设置消息的过期时间" class="header-anchor">#</a> <a href="#%E6%80%8E%E4%B9%88%E8%AE%BE%E7%BD%AE%E6%B6%88%E6%81%AF%E7%9A%84%E8%BF%87%E6%9C%9F%E6%97%B6%E9%97%B4">#</a> 怎么设置消息的过期时间？</h2> <p>在生产端发送消息的时候可以给消息设置过期时间，单位为毫秒(ms)</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Message</span> msg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Message</span><span class="token punctuation">(</span><span class="token string">&quot;tyson&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> mp<span class="token punctuation">)</span><span class="token punctuation">;</span>
msg<span class="token punctuation">.</span><span class="token function">getMessageProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setExpiration</span><span class="token punctuation">(</span><span class="token string">&quot;3000&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>也可以在创建队列的时候指定队列的ttl，从消息入队列开始计算，超过该时间的消息将会被移除。</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2023/5/15 18:10:09</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/Java/Java汇总/basic/01基础.html" class="prev">
        /Java/Java汇总/basic/01基础.html
      </a></span> <span class="next"><a href="/blog/MQ/常见问题/Rabbitmq如何保证消息不丢失.html">
        Rabbitmq如何保证消息不丢失
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.5c484a50.js" defer></script><script src="/blog/assets/js/3.8dc6c122.js" defer></script><script src="/blog/assets/js/35.37abd4f4.js" defer></script>
  </body>
</html>
